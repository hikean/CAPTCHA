数学一
卷结构
一试卷满分及考试时间
试卷满分为分考试时间为分钟
二答题方式
答题方式为闭卷笔试
三试卷内容结构
四试卷题型结构试卷题型结构为
单选题小题每题分共分
填空题小题每题分共分
解答题包括证明题小题共分
高等数学
一函数极限连续
考试内容
两个重要极限
闭区间上连续函数的性质
考试要求
关系
限存在与左右极限之间的关系
掌握极限的性质及四则运算法则
个重要极限求极限的方法
会用等价无穷小量求极限
断点的类型
用这些性质
二一元函数微分学
的关系
变性会求函数的微分
以及反函数的导数
三一元函数积分学
积分的应用
四向量代数和空间解析几何
线方程
两个向量垂直平行的条件
面的方程
五多元函数微分学
值最小值及其简单应用
的性质
会求它们的方程
了解二元函数的二阶泰勒公式
六多元函数积分学
分的关系高斯Gauss公式斯托克斯Stokes
重积分的中值定理
积分直角坐标柱面坐标球面坐标
线积分的关系
掌握计算两类曲线积分的方法
二元函数全微分的原函数
了解散度与旋度的概念并会计算
惯量引力功及流量等
七无穷级数
数的基本性质及收敛的必要条件
别法
掌握交错级数的莱布尼茨判别法
敛的关系
区间及收敛域的求法
会由此求出某些数项级数的和
一些简单函数间接展开成幂级数
八常微分方程
拉Euler方程微分方程的简单应用
量代换解某些微分方程
常系数齐次线性微分方程
会解欧拉方程
线性代数
一行列式
二矩阵
的方法
了解分块矩阵及其运算
三向量
正交矩阵及其性质
线性无关的有关性质及判别法
组的极大线性无关组及秩
之间的关系
方法
四线性方程组
解空间非齐次线性方程组的通解
会用克莱姆法则
程组有解的充分必要条件
五矩阵的特征值和特征向量
值和特征向量
六二次型
性定理
型为标准形
概率论与数理统计
一随机事件和概率
掌握事件的关系及运算
式全概率公式以及贝叶斯Bayes公式
二随机变量及其分布
量的分布随机变量函数的分布
随机变量相联系的事件的概率
及其应用
分布
会求随机变量函数的分布
三多维随机变量及其分布
独立的条件
参数的概率意义
单函数的分布
四随机变量的数字特征
分布的数字特征
会求随机变量函数的数学期望
五大数定律和中心极限定理
努利Bernoulli大数定律辛钦Khinchine大数定律
棣莫弗拉普拉斯DeMoivrelaplace定理列维林德
伯格LevyLindberg定理
了解切比雪夫不等式
同分布随机变量序列的大数定律
列维林德伯格定理
六数理统计的基本概念
常用抽样分布
本矩的概念其中样本方差定义为
念并会查表计算
了解正态总体的常用抽样分布
七参数估计
估计
八假设检验
的均值和方差的假设检验
检验可能产生的两类错误
算机
考研计算机专项精讲课程讲义
操作系统
主讲孙卫真
欢迎使用新东方在线电子教材
目录
第一章操作系统概述
考纲要求
操作系统的发展与分类
操作系统的运行环境
第二章进程管理
进程的概念
进程的状态与转换
进程控制
进程组织
进程通信
线程概念与多线程模型
处理机调度
调度的基本概念
调度的时机切换和过程
调度的基本准则
调度方式
同步与互斥
进程同步与互斥的基本概念
实现临界区互斥的基本方法
信号量
管程
经典的同步与互斥问题
死锁
死锁的概念
死锁处理策略
死锁忽略
死锁检测和恢复
死锁避免
死锁预防
第三章内存管理
内存管理基
内存管理概念
交换与覆盖
存储分配方式
连续分配管理方式
非连续分配管理方式
虚拟内存管
虚拟内存基本概念
请求分页管理方式
页面置换算法
页面分配策略
工作集
抖动
第四章文件管理
文件系统基
文件的概念
文件结构
目录结构
文件共享
文件保护
文件系统实
文件系统层次结构
目录实现
文件实现
磁盘组织与管理
磁盘的结构
磁盘调度算法
磁盘的管理
第五章输入输出IO管理
管理概述
控制方式
软件层次结构
核心子系统
调度概念
高速缓存与缓冲区
设备分配与回收
假脱机技术SPOOLing
出错处理
二操作系统的发展与分类
三操作系统的运行环境
四操作系统体系结构
操作系统的概念
于硬件和用户程序
能管理计算机软硬件资
使用范围
资源以尽可能合
操作系统的特征
要的是并发特征
操作系统的功能
和作业管理五大功能
操作系统所能提供的服务
使使用计算机的人
命令输入
提供人机对话平台
系统调用服务
提供编程时的系统服务
操作系统的发展
机需要满足其集群
系统能实时响应嵌入
力强等等因此操作
加快速强大地发展
操作系统的分类
单用户操作系统
批处理操作系统
批处理系统又分为以下两类
单道批处理系统
多道批处理系统
分时操作系统
实时系统
网络操作系统
分布式操作系统
并行操作系统
内核态与用户态
作系统管理程序运
后者一般指用户程序运
中断异常
事件的响应异常有
的异常是自愿性
异常一般为发出异常的
程序服务
系统调用
种特殊的机制通
的位置同时处理器
这个功能代码代表着对
之后监控程序恢复系
后将控制权转移回原来
的用户程序
系统调用与一般程序调用的不同
用的程序运行在系统
系统调用则必须通过
运行系统调用命令
有重新调度过程
级程序
系统调用一般不能嵌套或递归
操作系统体系结构
户服务器结构等
整体式结构
实现每个子功能
统效率较高
层次式结构
用次序分别将这
关系这样不但操作系
统的结构清晰而且不构成循环
微内核客户服务器结构
度虚拟存储消
通常采用层次结构并构
成了基本操作系统
一进程与线程
二处理机调度
三同步与互斥
四死锁
题选择题
进程概念的定义
栈段包含临时
全局变量等
度的一个独立单位
进程的特征
度而运行因得不
立的
具有不可再现性
运行
机系统中只能有一个
种事件的发生而处于
等待缓冲空间等
具备了运行的条件
三状态进程模型及其转换
是最基本的模型
图三状态进程模型
进程状态的转换
后进入运行状态
法运行让出处理机
塞状态进入就绪状态
运行或者在可抢先
的进程被强制撤下处理
机转换为就绪状态
进程原语
来完成的
进程创建
进程撤销
进程阻塞
进程唤醒
进程挂起
进程激活
进程实体
据栈等
信息
时间到
事件发事件等
调度
就绪
阻塞
进程控制块PCB
也称进程表PT
进程描述
进程控制和管
理信息
资源分
配清单
处理机相
关信息
进程标识
用户标识
进程当前状态
进程优先级
代码运行入口
地址
程序的外存地
进入内存时间
处理机占用时
信号量使用
代码段
指针
数据段
堆栈段
文件描
述符
键盘
鼠标
通用寄存
器值
地址寄存
控制寄存
标志寄存
状态字
图PCB表项内容
链接方式索引方式
图PCB表组织方式
信高级通信是指进
为三大类共享内存
消息传递以及管道机制
线程的发明
本单位但不是资
不可少的资源它同样
线程共享本进程所拥有
的全部资源内存文件以及设备
线程实现方式
考研计
赖于操作系统内核
程库来编写形成
用户编写的应用程序内
一旦因各种原因而阻塞
给进程所以用户多线
作业调度
择并建立相应的
通常不需配置作业调
进程调度
理机分配给该进程
的操作
交换调度
处于外存对换区中
存阻塞状态的进程交换
到外存对换区
引起进程调度的事件
队列
在时间片轮转法中时间片用完
调度队列
分派程序dispatcher
而将处理机分配
际操作者因此其运行
调度的基本准则包括
可能地小
越好
不可抢先方式
可抢先方式
进程调度算法比较
先来先服务FCFS
短作业或短进程优先SJFSPF
高响应比优先调度HRRN算法
时间预计运行时间
高优先级优先调度算法
分静态优先级和动态优先级
时间片轮转调度算法RR
多级反馈队列调度算法
基本概念
间接相互制约源于资源共享
直接相互制约源于进程合作
机公共变量等
同步机制应遵循的准则
同步机制应遵循下述四条准则
地利用临界资源
以保证互斥
以免陷入死等
免进程忙等
用软件实现的同步互斥机制
算法一单标志法
算法二双标志法先检查
算法三双标志法后检查
算法四PetersonsAlgorithm
进程互斥的硬件方法
检测和设置TS指令
字节的内容
表示申请一个资源
表示没有空闲资源
调用进程进入等待队列SQ
阻塞调用进程
表示释放一个资源
表示有进程处于阻塞状态
从等待队列SQ中取出一个进程P
进程P进入就绪队列
这组操作能同步进
程和改变管程中的数据
管程由三部分组成
局部于管程的共享数据说明
生产者消费者问题
缓冲区的大小为
有界缓冲区大小
定义信号量
临界区互斥信号量
空闲缓冲区
缓冲区初始化为空
局部变量
生产数据
获取空数据槽
获得进入临界区的信号量
将数据放入缓冲池
释放互斥量
数据量加一
获取数据槽
将数据从缓冲池读出
数据量减一即空槽加一
消费数据
读者写者问题
变量来记录读
需互斥为此又增设互
斥信号量rmutex程序如下
读者计数器的互斥量
写写读写互斥量
读者计数器
读者进程
进程被调度
取得读者计数器的互斥量
进来一个读者读者数量加一
如果是第一个读者取得
读写互斥量
释放读者计数器的互斥量
读数据
斥量
读者数量减一
读者使用数据
写者进程
进程得到调度
写者产生数据
获得写写读写操作互斥量
写入数据库
释放写写读写操作互斥量
哲学家进餐问题
解决办法
可以获得二只筷子
初始化信号量
仅允许四个哲学家可以进餐
第i个哲学家的程序
工作之一
请求进餐若是第五个则先挨饿
请求左手边的筷子
请求右手边的筷子
进餐
释放右手边的筷子
释放左手边的筷子
释放信号量给其他挨饿的哲学家
才允许他拿起筷子进
设置取筷子的信号量
在取筷子前获得互斥量
而偶数号哲学家则
相反程序代码如下
偶数哲学家先右后左
奇数哲学家先左后右
件系统处于一种
停滞状态这种情况称为死锁
死锁产生的原因
死锁的原因有以下二点
如果不足则进程就
个进程的请求造成进
程集无法推进的现象才是死锁
产生死锁的四个必要条件
放已经占有的资源
的避免和死锁的预
资源分配图算法
资源矩阵法
死锁的解除与系统恢复
恢复死锁常用的方法有如下几种
以恢复死锁
除死锁的地步
采用此方法
安全与不安全状态
进程都能顺利地完
银行家算法
使这些顾客能满
只要不出现一个顾客
表资源分配表
已分配资源尚需资源可用资源
经过分析
表用银行家算法进行资源分配
使系统在任何时刻
条件进行的
成为共享设备以此
可以解决互斥问题例如打印机
暂时释放已有的资
一内存管理基础
二虚拟内存管理
内存管理基础
存储管理的功能
换成物理地址
扩充内存容量的目的
地址重定位
逻辑地址空间
物理地址空间
重定位类型
中随即进行的地址
时才进行的地址变换方
变换机构实现的
请存储空间和在内
存中移动有利于程序段的共享
链接
静态链接
装入时动态链接
运行时动态链接
某一段存储空间
过不断地换出换入
交换如果交换以进程
交换又统称为部分
础虚拟存储系统就是采
用了这种部分交换而得以实现
静态分配
动态分配
固定式和可变式分区存储管理
分配算法
首次适应算法FirstFit
下次适应算法NextFit
最佳适应算法BestFit
最坏适应算法WorstFit
分区的存储保护
存放最大长度
个相同的但又不与
态字PSW中当程序要
若相符则表明允许
本次访问否则发出越界中断
简单分页存储管理
称为页框PageFrame
干个与存储块大小相
以连续的页号
址即相对地址
任何一个可用的存储
程序段和数据全部
拟地址到内存物理地址
的地址映射
快表
分段存储管理
数据段堆
的由段号和段内地址
组成
地址转换
段的共享与保护
变换的数据结构
址空间不受内存容量的
限制
虚拟内存管理
局部性原理
可能再次运行产生
近的存储单元也将枝
访问其典型情况是程序顺序运行
虚拟内存
将当前运行到的那
外存上当要运行的指
们调入内存以使程序
暂时不用的程序或数据
内存使程序继续运行
实现虚拟内存的基础
表缺页中断机构
程序操作系统支持
虚拟内存的主要特征
多次性
对换性
虚拟性
请求分页的基本原理
管理在作业或进程
部装入内存而只把当
再从外存上调入内存
页表的扩充
如图
读写控制页框
简单分页系统的页表
外存
其它
扩展
读写
控制
修改
用位
存在
页框
虚拟请求分页系统的页表
图页表的表项
存在位presentabsent表示该页是否在内存
未被修改过
引用过
其它如页面保护位protection禁止缓存位cache
地址变换
缺页中断处理
存放地址并把它从
某页进行淘汰以腾出
选中淘汰的页面中的信
则根据该页在外存的
新执行
调页策略
图对一个不存在于
时才调取页面的策略
而把事先调取页面的
策略称为预调页
随机淘汰算法
面并将其换出
先进先出算法FIFO
面进行淘汰其理
页往往也是经常被访
使缺页中断较频繁严
重降低内存的利用率
最佳置换算法OPT
最近最久未使用页面置换算法LRU
程中过去的页面访
页面在最近的将来可
能也不会再被访问
最近没有使用页面置换算法NRU
修改位利用这二
位组织成四种状态引用位修改位
每次置换时总取
时钟算法CLOCK
引用位用一个
固定分配局部置换策略
可变分配全局置换策略
可变分配局部置换策略
这些页面是频繁地
行将很频繁地产生
簸往往是刚被淘汰的
算法挂起或撤销
若干进程等
一文件系统基础
二文件系统实现
三磁盘组织与管理
合题题其它为
选择题
文件系统基础
文件定义
文件属性
物理位置文件长
够读写或运行文件使
文件操作
访问位置等
文件逻辑结构
称流式文件
分记录各记录大小
索引文件主文件不
中的某个关键字域排序
文件物理结构
存储设备又称物
理文件
常用的文件物理结构有
续的物理块中
块均设有一个指针指
接成一个串联队列链
链接表中隐式链接的
指针在存放文件信息的物理块中
指出文件记录所在的
排列对于大文件为
件称为索引表文件
表的表项指出下一
索引表的位置这样间接
对应关系体现这种
对应关系的数据结构称为目录
文件目录管理基本要求
这是目录管理基本功
允许文件重名采用多级目录
文件组成
是文件本身的信息
目录是由一组文件的文
文件控制块FCB组成
物理结构
般用户的权限
时间当前的使用信
文件目录组织形式
单级目录结构
二级目录结构
多级目录结构
即是图形化目录
要有三种方式
上所有各级目录的目
共享文件所在的目录
表项而不是直接指向文件
基本目录表方法
部分一部分包括
用文件系统赋予的唯一
件的内部标识符组成
访问类型
地为防止文件被破
读写修改运行添加删除列表清单
访问控制
身份访问的最普通
件权限的集合形成了一
类型的访问
文件系统安全
重要的文件保存多
件来恢复文件系统
天复制到备份磁带
文件系统实现
线性列表
散列表
个磁盘和内存结构
系统而异但还是有一
些通用规律
图磁盘结构
设备等待设备或总线忙需要等候
常用的磁臂调度算法有
先来先服务FCFS调度
最短寻道时间优先SSTF调度
扫描算法SCAN调度
如此往复
循环扫描CSCAN调度
即服务返回是直
察看LOOK调度
不是继续到磁盘的
调度这是因为它们
根据题意合理选择
相应的算法做出符合题意的结果
一IO管理概述
二IO核心子系统
设备概念
内存以外的所有设备
通常也称为外部设备
设备分类
按交互对象分类人机交互设备等
按交互方向分类输入输出设备等
管理目标
用设备的策略
应用接口
缓冲和调度目标是提高IO访问效率
接口控制方式
送外围设备和内
程序访问控制方式
中断控制方法
方式
通道方式
软件的目标
设备独立性
统一命名
较高的层隔离而较
设备无关的设备独立
层和用户层
之间的数据传送
的主要方式
是与设备无关的
用由库过程实现
当一个应用程序运
高速缓存
缓冲区
据的内存区域缓
冲技术可分为
出设备公用
另一部分专门用
于输出
池中的缓冲区可供
多个进程共享
设备分配概述
及相关的硬件
设备分配用数据结构
配置IO设备的
备存在的话
图设备分配的数据结构
比较重要的数据结构有
道一张
设备分配策略
效率又要避免造成
进程死锁
是在用户作业开始运
直到该作业被撤销才释
向系统提出请求系统
完之后立即释放
优先级高
者先分配等
指在多道程序环境下
制机的功能以达到脱
机输入输出的目的
系统的组成
系统主要由以下三部分组成
计算机网络
主讲白龙飞
第一章计算机网络学习方
第二章知识点分
第三章计算机网络体系结
计算机网络概
计算机网络的概念组成与功
计算机网络的分
计算机网络与互联网的发展历
计算机网络体系结构与参考模
计算机网络分层结
计算机网络协议接口服务等概
参考模型和TCPIP模
第四章物理
通信基
概念
奈奎斯特定理与香农定
编码与调
电路交换报文交换与分组交
数据报与虚电
传输介
物理层接口的特
物理层设
中继
集线
第五章数据链路
数据链路层的功
差错控
检错编
纠错编
流量控制与可靠传输机
流量控制可靠传输与滑动窗口机
停止等待协
后退N帧协议
选择重传协议
介质访问控
信道划分介质访问控
随机访问介质访问控
局域
局域网的基本概念与体系结
以太网与IEEE
令牌环网的基本原
广域
广域网的基本概
数据链路层设
网桥的概念及其工作原
局域网交换机及其工作原
第六章网络
网络层的功
异构网络互
路由与转
拥塞控
路由算
静态路由与动态路
距离向量路由算
链路状态路由算
层次路
地址与NAT
子网划分与子网掩码CIDR
协议DHCP协议与ICMP协
的主要特
路由协
自治系
域内路由与域间路
组播的概
组播地
移动IP
移动IP的概
移动IP的通信过
网络层设
路由器的组成和功
路由表与路由转
第七章传输
传输层提供的服
传输层的功
传输层寻址与端
无连接服务与面向连接服
数据
连接管
可靠传
流量控制与拥塞控
第八章应用
网络应用模
客户服务器模
层次域名空
域名服务
域名解析过
协议的工作原
控制连接与数据连
电子邮
电子邮件系统的组成结
电子邮件格式与MIME
协议与POP协
的概念与组成结
第九章网络实验入
研究包大小和传输时间的关
使用tracert和ping命
学习使用ethereal观察网
观察web简单过
第十章网络基础总
第一章计算机网络学习方法
不可或缺的方向大纲将计算机网
次化的思想复习难度将大大降低
考核目标
作原理
行网络系统的分析设计和应用
复习教材
航出版社
版社
一计算机网络体系结构
一计算机网络概述
计算机网络的概念组成与功能
计算机网络的分类
计算机网络与互联网的发展历史
计算机网络分层结构
计算机网络协议接口服务等概念
参考模型和TCPIP模型
二物理层
一通信基础
奈奎斯特定理与香农定理
编码与调制
电路交换报文交换与分组交换
数据报与虚电路
二传输介质
物理层接口的特性
三物理层设备
中继器
集线器
三数据链路层
一数据链路层的功能
二组帧
三差错控制
检错编码
纠错编码
四流量控制与可靠传输机制
停止等待协议
后退N帧协议GBN
选择重传协议SR
五介质访问控制
信道划分介质访问控制
概念和基本原理
随机访问介质访问控制
协议CSMA协议CSMACD协议CSMACA协议
六局域网
局域网的基本概念与体系结构
令牌环网的基本原理
七广域网
广域网的基本概念
协议
八数据链路层设备
网桥的概念及其工作原理
局域网交换机及其工作原理
四网络层
一网络层的功能
异构网络互联
路由与转发
拥塞控制
二路由算法
静态路由与动态路由
距离向量路由算法
链路状态路由算法
层次路由
分组
协议DHCP协议与ICMP协议
的主要特点
五路由协议
自治系统
域内路由与域间路由
路由协议
六IP组播
组播的概念
组播地址
七移动IP
移动IP的概念
移动IP的通信过程
八网络层设备
路由器的组成和功能
路由表与路由转发
五传输层
一传输层提供的服务
传输层的功能
传输层寻址与端口
无连接服务与面向连接服务
二UDP协议
数据报
校验
三TCP协议
连接管理
可靠传输
流量控制与拥塞控制
六应用层
一网络应用模型
客户服务器模型
模型
二DNS系统
层次域名空间
域名服务器
域名解析过程
协议的工作原理
控制连接与数据连接
四电子邮件
电子邮件系统的组成结构
协议与POP协议
的概念与组成结构
第三章计算机网络体系结构
计算机网络概述
立的多个计算机系统互连起来以
递的系统
例下面不属于网络拓扑结构的是
答案D
标准化网络
计算机网络体系结构与参考模型
每一层关注和解决通信中的某
易于实现和维护促进标准化工作
定的有关通信规则约定的集合网
络协议的三个要素
语义Semantics语法Syntax同步即定时
接口服务访问点
服务service
参考模型
各节点有相同的层次
下层为上层服务
物理层
息交换的唯一一层物理层负责
传送二进制位流
的工作原理
数据链路层
为单位的数据每一帧包括一定数
量的数据和若干控制信息
传送数据时如果接收节点发现数
网络层
供一条逻辑通路其基本任务包括
传输层
务透明地传送报文它向高层屏蔽
会话层
遵循的规则使传输更顺畅有效
判时就根据这套规则进行一样
表示层
而其它用户使用ASCII编码表
恢复等也都是表示层提供的服务
应用层
电子邮件网页浏览等服务给
用户
面向信息处理
面向数据通信
用户功能
网络功能
网络接口层networkinterfacelayer
网络发送和接收IP数据报TCPIP
帧是独立的网络信息传输单元
网络层internetlayer
考模型网络层的无连接网络服务
网上
将分组装入IP数据报填充报
检查目的地址如需要转发则
报头将分组送交给传输层处理
处理互联的路径流控与拥塞问题
传输层transportlayer
端Hosttohost通信在TCPIP
和用户数据
报协议UDPuserdatagramprotocol两种协议
流bytestream无差错地传送
到目的主机
到达的传输中分组传输顺序检
查与排序由应用层完成
应用层applicationlayer
有的高层协议并且总是不断有新
的协议加入其主要协议包括
文件传输协议FTPfiletransferprotocol用于
简单邮件传输协议SMTPsimplemailtransfer
用于实现互联网中邮件传送功能
域名系统DNSdomainnamesystem用于实现互联
网设备名字到IP地址映射的网络服
超文本传输协议HTTPbypertexttransferprotocol
用于目前广泛使用的Web服务
路由信息协议RIProutinginformationprotocol
用于网络设备之间交换路由信息
第四章物理层
通信基础
数据信息的承载实体
信号数据的电磁或电气表现
说是频带的宽度另一个定义是信
道中数据的传送速率
代表不同离散数值的基本波形
波特单位时间内传输的码元数
比特率单位时间内传输的比特数
最大数据传输率BHBaud
为一个码元所取的离散值个
信号功率N为噪声功率SN为信
噪比通常把信噪比表示成lgSN分贝dB
答案由Nyquist定理CHlogNbpslog
分析Nyquist定理的直接应用
答案
分析香农和Nyquist定理的综合应用
调相PM
网络又可分为电路交换网报文交
换网和分组交换网
电路交换
电路交换的三个过程
电路建立数据传输电路拆除
报文交换
的数据块其长度不限且可变当
叫建立连接
分组交换
分组的长度有一个上限有限长度
通信如终端与主机通信
连接的建立必须有不需要
分组使用短的虚电路号
每个分组都有终点的完整地址
按照同一路由进行转发
每个分组独立选择路由进行转发
电路均不能工作
由可能会发生变化
顺序
端到端的差错处理和流量控
可以由网络负责也可以由用
户主机负责
由用户主机负责
传输介质
三种交换方式的比较
分组交换a电路交换
物理层设备
例用集线器连接的工作站集合
属一个广播域
属一个广播
答案A
第五章数据链路层
数据链路层的功能
数据和控制信息分开透明传输和
寻址
组帧
面向比特的方法
加入一个特殊的比特序列前文位
构成最终传输的帧
面向字符的异步传输
加入一个特殊点额字符序列前文
而构成最终传输的帧
差错控制
式为GxXX请问收
到的信息有错吗为什么
本的运算原理
用汉明码来检测并纠错简单的说
因此定名为汉明码
流量控制与可靠传输机制
方也要接收下来若把这个范围看
空闲RQ发送窗口接收窗口
发送窗口接收窗口
选择重发发送窗口接收窗口
有序接收方式发送窗口最大尺
要求发送方重发最后一个正确接
后若发现该N帧的前一个帧在计时
帧这就是GODACKN退回N法名称的由来
重发SELECTICEREPEAT
介质访问控制
念和基本原理
频分多路复用FDM和时分多路
机制这样的系统是竞争系统
说只能用原信道吞吐量的
载波监听多路访问CSMA
总线上没有其他站点的发送信号
况决定是否发送数据
载波监听多路访问冲突检测CSMACD
和CSMACA的主要差别对比如下
无法避免
检测到信道上有无冲突只能尽
量避免
则用于无线局域网
等等
据发生碰撞时电缆中的电
和能量载波混合检
测三种检测信道空闲的方式
来自其他节点的信号强度
理解和遵守的规则从一个站点到
另一个站点传递控制令牌
局域网
介质访问控制子层MAC
逻辑链路控制子层LLC
服务访问点SAP
跳频扩频FHSS已很少用红
外线IR已很少用
标准频段数据速率物理层优缺点
最高为MbsHRDSSS最高数据率较低价
格最低信号传播距离最远且不
易受阻碍
最高为MbsOFDM最高数据率较高支持更
多用户同时上网价格最高
信号传播距离较短且易受阻碍
最高为MbsOFDM最高数据率较高支持
更多用户同时上网信号传播距
离最远且不易受阻碍价格比b贵
等待空标记通过然后将它改为忙
所以其它站不能发送帧必须等待
使之获得发送帧的许可权
广域网
正式标准RFC
用特定的操作方式所谓操作方
可为主站
数据链路层设备
网桥的概念
假设一CSMACD局域网上的主机A与TokenRing局域
网上的主机B通信两个局域网
通过网桥互连如图所示
目的地的MAC介质访问层地址
以太网交换机的工作过程
端口MAC地址映射表
二维表包含端口MAC计时
态更新读取帧的源地址并记录
利用计时器维护表项的新鲜
如何建立更新端口MAC地址映射表
如何过滤信息
转发到何处
端口以外的所有端口转发
适用
第六章网络层
网络层的功能
协议的虚拟互连网络可简称为IP网
例网络层的主要目的是
靠传输
答案C
路由算法
距离向量路由算法BellmanFordRoutingAlgorithm也叫做最
大流量演算法FordFulkerson
到邻居发来的距离向量表分别
静态路由
动态路由协议
距离矢量协议
链路状态协议
为来自B来自D
来自E而C到BD和E
到每一个目的站点的最短路径
路是不对称的
通过D到达每个站点的距离向量
通过E到达每个站点的距离向量
对应的输出线路为BBDE
态发生变化等时路由器会产生
链路状态广播数据包LSALinkStateAdvertisement该数据
有端口的状态信息
请采用LS路由算法进行路由计算
各结点的链路状态如下
分析链路状态算法的具体应用
己特定的标识号
首部数据部分
每一个十进制数表示个
每个十进制数只允许在范围内
分类
线路延迟
特殊地址
主机地址全为
例如表示其网络号为
数据报例如IP地址为
据报
字节比特全为
网络号
址称之为回送地址
口状态
的网络ID
主机ID
答案B
子网划分
地址子网地址是借用基于类的网
这就是子网掩码
子网掩码
其对应网络地址的所有位都置为
的子网掩码是B类网络的缺
将子网掩码和IP地址按位进行
址从而区分出任意IP地址中的网络
络前缀法表示子网掩码即网络地
址位数如表示B类网络的子网掩码
子网划分与掩码的设置
原网络划分为若干子网而实现的
减少
子网划分的技巧
掩码位即进制为的部分
为的部分
址剩下的就是有效主机地址最后
无类别域间路由CIDR
假设有一组C类地址为如果用CIDR将
这组地址聚合为一个网络其网络
地址和子网掩码应该为
我们先将C类地址的第三个八位组
转换成二进制
这些C类地址就被聚合在一个网
网络地址才有聚合的意义
和Y通过TCPIP
表为空现在源端计算机A
地址为要和IP地址为的计算机
通信在计算机A发送信息前
议工作过程如下
完整的ARP工作过程
对应的ARP表项
送给主机B
求数据包并以广播方式发
要查询的计算机的IP地址
以及主机A自己的IP地址和MAC地址
收到A的ARP请求包然后将计
接发送给主机A
的MAC地址添加到自己的ARP
它将被从ARP表中删除
此为server对DHCPdiscover报文的响应
此为client对ddihcpoffer报文的响应
当client发现server分配给它的IP地址无法使用
如IP地址发生冲突时将发出此
报文让server禁止使用这次分配的IP地址
对DHCPrequst报文的响应client收到此报文
后才真正获得了IP地址和相关配置
此报文是server对client的DHCPrequst报文的拒绝响
应client收到此报文后一般会重
新开始DHCP过程
此报文是client主动释放IP地址当server收到
他的client
拥塞
现象
拥塞产生的原因
拥塞控制源站抑制
发送源站抑制报文策略
报文
送ICMP源抑制报文
接收源站抑制报文
重定向机制
的最优路径
回应请求与应答
测试目的主机或路由器的可达性
时戳请求与应答
获取其他设备的当前时间
掩码请求与应答
从路由器获取本网的子网掩码
对QOS更好的支持
路由器的集合AS内部运行内部网
关协议IGPAS之间运行外部网关协议EGP
选择的协议称为
案为C
代表后者常用的有OSPFISIS协议
上的域间路由协议事实标准是BGP
路由协议就是一种动态路
路由器经过秒没有收到来自对端
若在其后秒内仍未收到更新报文
就将这些路由从路由表中删除
基本原理
最小生成树算法
算法举例
选列表中删除接着从B开始寻
找找到了D将其放入候选列表CD
不再加入候选列表最后将D
是一种自治系统间的动态路由协
等在自治区域内部运行的协议对
应BGP是一类EGPExteriorGatewayProtocol协议而OSPF和
等为IGPInteriorGatewayProtocol
组播
先对IP网络数据传输的单播
组播MAC地址
现在有两个版本简单的
过程中在不改变现有网络IP地址不
现对网络的不间断访问
代理发现AgentDiscovery
转交地址注册取消注册RegistrationDeregistration
数据的收发
网络层设备
从合适的端口转发出去
动态地改变所选择的路由
主机A发送IP数据报
构造目的地址为B的IP数据报
的IP地址和MAC地址的映
据报封装在帧的数据区帧IP数据
真正传输
路由器R处理和转发IP数据报
给IP软件处理
考虑路由器如何接受数据帧
软件对IP数据报进行了何种处理
如何发送同上
报交给IP软件处理
决定将IP数据报直接投递到
主机B接收IP数据报
第七章传输层
传输层提供的服务
交互的一种地址
结束后则应该终止这个连接在
例对UDP数据报描述不正确的是
例在TCP分段中不包括的信息是
报文中不出现
连接的建立
连接释放过程
的编码和确认
的糊涂窗口综合症和Nagle算法
的超时与重传
计时器
收到一个窗口大小为零的确
就发送一个特殊的探测报文
之间的连接处以长时期空闲
关闭一个连接时它并不认为这
过渡状态时间等待计时器的值
主机A主机B
主动打开被动打开
连接请求
确认
主机A
应用进程
释放连接
通知主机
不再
发送报文
确认B不再
主机B
的滑动窗口机制
要传输的数据为B依次编
序为请回答如下问题
那些序号的报文不可发送
小是B那么发送端将自己的发送
连续地发送出去发送开始时
发送而序号的报文
不可发送如图所示
图发送窗口大小为B
的报文已经得到接收端的确认
滑动到的位置表明已经
发送的数据等待对方确认
可以继续发送的报文
时由于这一段时间没有发送新的
报文已经被确认可以继续发
送序号的报文
的慢启动和拥塞避免
一般CwndMSS设置慢启动
门限初值Cwnd为拥塞窗口
开始发送过程发送窗口swnd按式swndminCwndrwnd
计算一般通告窗口rwnd
足够大实际上swndCwnd
从初值开始每收到一个对新报
增加到第
律增长即每传输次
加倍直到Cwndssthresh其中ssthresh为慢启动门限
进入拥塞避免
当在某时刻发生了拥塞则置ssthreshmaxswnd
即将ssthresh降到拥塞发生时swnd的
慢慢注入网络
时向网络注入的分组数大大减少
超时重传时间的选择
段就对这个报文段设置一次
传这一报文段
数据报所选择的路由变化很大
加权平均往返时间
返时间
以后每测量到一个新的RTT
样本就按下式重新计算一次RTTS
新的RTTS旧的RTTS新的RTT样本
若选择接近于则表示RTT值
更新较快RFC推荐的值为即
超时重传时间RTO
建议使用下式计算RTORTORTTSRTTD
次测量时RTTD值取为测
平均的RTTD
新的RTTD旧的RTTDRTTS新的RTT
样本
是个小于的系数其推荐值是即
算法
时间样本这样得出的加权平均
修正的Karn算法
系数的典型值是
返时延RTT和超时重传时间RTO
快重传和快恢复
第八章应用层
网络应用模型
大类客户服务器方式CS方式
即ClientServer方式和对等方式PP方式即PeertoPeer方
供方
系统
点号分隔具体格式如下主机名
网络名机构名最高层域名
高效率地转换成IP地址域名服
址转换请求程序三部分组成
务器
中第一步和最后一步为递归查询
其余为迭代查询的过程
例域名服务DNS的正向解析是
文件传送协议特点
传输服务
个客户进程提供服务
图是工作原理的图示
根域名服务器
本地域名服务器
本地主机
查询
返回com域名
服务器地址
应答
返回sina域名
递归查询
迭代查询
服务器协议
接口
服务器数据
传输功能
服务器
用户接口
用户协议解
释器
用户数据传
输功能
客户机
文件
在终端上的
控制连接
命令
数据连接
电子邮件
方的计算机之间传送的而是通过
因特网服务提供商InternetServiceProviderISP的邮件服
现的
做出了具体规定
电子邮件报文的组成
基本语法keywordvalue
字符串组成
体由位ASCII文本而且SMTP
继续扩充
多用途因特网邮件扩展协议MIME
传输
的基本邮件头和邮
位的二进制信息变换成位的ASCII
文本
主要增加的邮件头字段
要标准为
指出邮件体的数据编码类型
使用MIME格式的电子邮件
简单邮件传输协议SMTP
的最大特点简单直观
命令和响应都是可读的ASCII
字符串
邮件传输采用客户服务器模式
服务器在TCP的端口守候
常用的SMTP命令
常用的SMTP响应
邮件传递过程分为个阶段
连接建立阶段
邮件传递阶段
连接关闭阶段
邮局协议POP
器上的邮件
传输采用客户服务器工作模式
的命令和响应采用ASCII字符串形式
常用的POP命令
的响应的两种基本类型
以ERR开始错误的或不可执行的命令
只包含的行表示响应结束
传输过程的个阶段
认证阶段
事务处理阶段
更新阶段
传输过程举例
超文本传输协议
立一个TCP连接就能够通过
请求WEB服务器发送一个页面如
向网页中添加数据
删除网页
协议使用持续连接
一个客户浏览器和该服务器可
浏览器例如IE的默认设置就
是使用HTTP
持续连接的两种工作方式
比非持续连接的两倍RTT的开销
对象后其TCP连接就处于空闲
状态浪费了服务器资源
的请求报文一个接一个的请求
客户端浏览器WebServer
请求
例下列描述错误的是
和层次划分
第九章网络实验入门
研究包大小和传输时间的关系
据会经过中间的路由器然后从远
的命令窗口运行其基本格式是
用于实现一种叫做DDOS的网络黑
现因此在完成这个实验后回答如
下问题
问题填写下表
访问主机wwwsinacomcn
查一下为什么
附录
一台主机交换数据报根据返回的
的测试你可以换一个IP或域名再试
网络层网卡MODEM的输入输出
缺省设置Windows上运行的Ping命
应答Ping能够以毫秒为单位显示发
起始值减去返回包的TTL值从而推
起始值是源地点到目标地点要通
过个路由器一共是个hop
况时我们需要使用一系列Ping命
置参数没有问题如果某些Ping命令
表示TCPIP协议的安装存在问题
本机的IP
对该Ping命令作出应答如果没有
局域网其他电脑的IP
卡配置错误或电缆系统有问题
网关的IP
够作出应答
远程的某个IP
存在问题
务器解析如果这里出现故障则
的功能基本上就可以放心了但是
命令还有一些常用参数选项
使用tracert和ping命令
并观察转发延时我们就先试着
用ping命令测试一下wwwbaiducom
观察结果并回答以下问题
如果成功Replyfrom的IP地址bytestime和TTL的
值是什么
项将更快地显示路由器路径因
在哪个环节上出了问题虽然还是
我们进一步用tracert命令来测试一下
并回答以下问题
为什么
每个中间路由耗时各为多少
学习使用ethereal观察网络
的最好方法是使用它
还没有开始捕获包
可以使用窗口中各选项的默认值
认接口点击prepare则将会出现
窗口如右图所示使capturefilter保持
为空接下来钩选updatelistofpacket
和接收的所有包都会被Ethereal捕获
捕获窗口中按下stop按钮来停止
协议消息你已经完成了一次成功
的协议数据捕获
请回答以下问题
列出你抓到的各种包的协议名称
认time列显示的是开始捕获后的
示请选择Ethereal的View下拉菜单
然后选择时间显示格式为Timeofday
菜单
附录Ethereal基础
就如名字所示这是个包
进行的
下图显示了一个包嗅探器的结构
来的框中它侦听并接收每一个链
可以从IP数据包中取出TCP段它也
最后它需要了解HTTP协议等等例如需
库可以在安装Ethereal时的选项
中钩选WinPcap来安装
观察web简单过程
没有数据因为Ethereal还有开始
捕获包
的URL让它下载一个页面在你的浏
览器中显示
进行联系和服务器进行HTTP消
捕获
按钮来停止包捕获Ethereal
过网络进行交换的协议消息HTTP消
现但是同样也有其他类型的包
在Ethereal主窗口的顶部的Filter中输入http然后
选择Apply这样只有HTTP消息会
被显示在包列表窗口
消息是由你的电脑发送给
的HTTP服务器的当你选中HTTPGET消息后
以太网帧IP数据包TCP段以及HTTP
现在Ethereal显示的大致如下图所示
回答以下问题
时间是多久
第十章网络基础总结
相关知识点先总结每一章的知识
要点如下
为了突出系统结构的重要性概述
的比较
明白数据链路层的组帧机制差错
网桥和交换机要掌握网桥的概念
交换机的基本功能和实现原理
是最基本的几个比较经典的路由
地址与NAT子网划分与子网
进行考查作为新版本的IP协议IPv
组播的概念和IP组播的地址移动IP
路由转发
的服务要掌握住面向连接的TCP
过程TCP的可靠传输TCP的流
量控制和拥塞控制
和PP模型大纲里面把后两者
应用比如DNS应用FTP邮件应用和
要掌握DNS的解析过程FTP协议
议也关注一下
组成原理
主讲蒋教授
第一章计算机系统概
考纲要
复习要
计算机发展历
计算机系统层次结
计算机硬件的基本组
计算机软件的分
计算机的工作过
计算机性能指
第二章数据的表示和运
数制与编
进位计数制及其相互转
真值和机器
字符与字符
定点数的表示和运
定点数的表
定点数的运
浮点数的表示和运
浮点数的表
浮点数的加减运
算术逻辑单元ALU
串行加法器和并行加法
算术逻辑单元ALU的功能和结
第三章存储器层次结
存储器的分
存储器的层次化结
半导体随机存取存储
存储器的工作原
只读存储
主存储器与CPU的连
双口RAM和多模块存储
高速缓冲存储
程序访问的局部性原
的基本工作原
和主存之间的映射方
中主存块的替换算
写策
虚拟存储
虚拟存储器的基本概
页式虚拟存储
段式虚拟存储
段页式虚拟存储
第四章指令系
指令格
指令的基本格
定长操作码指令格
扩展操作码指令格
指令的寻址方
有效地址的概
数据寻址和指令寻
常见寻址方
和RISC的基本概
第五章中央处理
的功能和基本结
指令执行过
数据通路的功能和基本结
控制器的功能和工作原
硬布线控制
微程序控制
指令流水
指令流水线的基本概
超标量和动态流水线的基本概
第六章总
总线概
总线的基本概
图种类型的三态
总线的分
总线的组成及性能指
总线仲
集中仲裁方
分布仲裁方
总线操作和定
同步定时方
异步定时方
总线标
第七章输入输出系
系统基本概
外部设
输入设
输出设
外存储
接口IO控制
接口的功能和基本结
端口及其编
程序查询方
程序中断方
通道方
参考文
第一章计算机系统概述
使读者对于计算机
一计算机发展历程
计算机发展史存储程序的概念
二计算机系统层次结构
计算机硬件的基本组成
设备
计算机软件的分类
系统软件与应用软件
计算机的工作过程
三计算机性能指标
复习要点
计算机发展历程
天的视角去观察
里程碑从第一台电子计
发展着其发展速度是世
界上任何其他学科所无法比拟的
计算机的发展
统一的标准最常见
第一代电子管计算机
第二代晶体管计算机
第三代小中规模集成电路SSIMSI计算机
存储程序概念
小只能用线路连接
将大大超过实际计算时间
小组提出了存储程
输出设备大基本部件
机工作这就是存储程
序的基本含义
出和实现多年来
多数计算机仍建立在存储
冯诺依曼型计算机
计算机的发展趋势
型化网络化高性
行处理智能化方向发展
光子计算机生物
计算机系统层次结构
按功能划分的多级层
次结构如图所示
应用语言机器M
具有L机器语言应用语言
高级语言机器M
具有L机器语言高级语言
汇编语言机器M
具有L机器语言汇编语言
操作系统机器M
具有L机器语言作业控制语言等
传统机器M
具有L机器语言机器指令语言
微程序机器M
具有L机器语言微指令系统
第级
虚拟机器
实际机器
翻译应用软件包
翻译编译程序
翻译汇编程序
部分解释操作系统
解释
硬件直接执行
硬联逻辑
图计算机系统的多层次结构
路组成
编写的微程序一般是直
接由硬件执行的
机器指令编写的程序可
以由微程序进行解释
接管理传统机器中的软
翻译的程序叫做汇编程
编译程序来完成高级语
言翻译的工作
设计的因此这一级语
言就是各种面向问题的应用语言
系统的工作过程明
常是指一切看得见
运算器控制器
主存储器
输入设备输出设备
地址或指令CPU
存储器
输入设备输出设备辅助存储器
图计算机硬件系统的组成框图
集成电路构成的微型
以外的硬件装置如
输入设备
并且将它们转换成计
鼠标扫描仪等辅助存
输出设备
形式送出计算机最
算机能够实现存储
程序控制的基础
统如图所示的
但容量较小一般用来
较低但存取速度较慢
辅存辅存中的程序和数
度很高时为了使访问存
高速缓冲存储器
处理的程序和数据以便快
速地向CPU提供指令和数据
辅助存储器
图三级存储系统
运算器
算和逻辑运算所以
运算器又称为算术逻辑运算部件ALU
存器用来暂存操作
控制器
定的操作步骤控制
控制器中包括一些专用的寄存器
统是在硬件系统的基
是用户为解决某种应用问
监视和服务等功能
通常将系统软件分为
包括硬件软件及其
算机之间的接口提供了软
作系统实时操作系统等
言如汇编语言和各
语言处理程序包括编译程
言变成为机器语言但前
处理采用边解释边执行的
链接程序编辑程序
调试程序诊断程序等
件是为数据库的建立
使用和维护而配置的软件
件种类繁多
的灵魂硬件和软件
是相辅相成不可分割的整体
在计算机系统中没
和软件在逻辑上是等价的
固件固件是指那些
能的硬件固件的性能指
快于软件灵活性优于硬
件是软硬件结合的产物
例完整的计算机系统应包括
分硬件和软件是相
机硬件系统
例由代码组成的语言称为
由二进制代码编写的
与计算机硬件结构无关的
程序设计语言
计算abc设a
放在主存的号单元如
令这条指令依次存放在
中主存中有关单元的内
运算的两个操作数一个来自累
中的存储器数据寄存器
取数
加法
减法
存数
停机
累加寄存器
数据总线
图计算机执行过程实例
骤如下
数b一起送到ALU中相
加结果ab保留在累加寄存器中
出的数c一起送到ALU
中相减结果abc保留在累加寄存器中
执行停机指令计算机停止工作
计算机性能指标
介绍计算机的主要性
能指标
机器字长
位数决定的所以机
计算的精度就越高
本单位用大写字母B
表示一个字节等于位二进制位bit
字的长度应该是固
一个字等于位
数据通路宽度
所说的数据通路宽度
存器的大小有可能不同
宽度不相等
主存容量和存取速度
数来表示存储容量
用到KMGTP之类
所示
表KMGTP的定义
单位通常意义实际表示
数来描述
操作到完成该操作所
命令开始直到将被选单
效地址和写命令开始直
的读写操作所需的全
一般情况下TmTa
示每秒从主存进出信
运算速度
操作以及主存本身的
速度等
吞吐量和响应时间
对请求作出响应的时
时间用于磁盘访问存
主频和CPU时钟周期
主频的倒数就是
时钟周期
由于采用各种并行技
若干条指令所以CPI参
执行时间
时钟周期数
时钟频率
指令执行所用的时钟周
期数指令条数IC
义为
指令条数
主频
主频IPC
定义为
浮点操作次数
主频B主存容量CMIPSDMFLOPS
它们并不是标志系统
获得好的性能MIPS和
运算速度MFLOPS
编译优化
仅I和B仅I和IIIC仅和IIIDIIII
优化数据通路结
令序列因此以上项都
是缩短程序执行时间的措施
相同
为多少
期为多少
机的平均指令执行速度为多少
答案A机的CPU时钟周期为s
机的平均指令周期为s
机的平均指令执行速度为MIPS
机平均每条指令的时钟周期数CPIAss
而微机A和B片内逻
机的平均指令执行速度
第二章数据的表示和运算
的结构和性能本章
法最后介绍算术逻辑运
算部件ALU
一数制与编码
进位计数制及其相互转换
真值和机器数
码码和余码
字符与字符串
码汉字编码
校验码
二定点数的表示和运算
定点数的表示
定点小数与定点整数的表示
定点数的运算
运算定点数的乘
除运算溢出概念和判别方法
三浮点数的表示和运算
浮点数的表示
浮点数的表示范围IEEE标准
浮点数的运算
浮点数的加减运算
四算术逻辑单元ALU
串行加法器和并行加法器
算术逻辑单元ALU的功能和结构
数制与编码
数据字符和汉字
通常用二进制八进
制和十六进制来表示
进位计数制的基本概念
进制的基数为每
码所表示的数值就等
权简称权例如十进
的数值等于数码乘以常
数即
乘以常
之一个基数为r的r
进制数可表示为
式中r
一个
进制数的进位原则是逢r进一
六进制B七进制C八进制D九进制
进制
计算机中常用的进位计数制
二进制表示
和即基数为
逢二进一任意数位的权是
表常用的二进制数的权值
权权值权权值
两种不同稳定状态的物
理器件来表示两个数码或
传送和处理都变得可
靠得多
有力工具来分析综合
与设计计算机的逻辑线路
所使用的位数长得多
们通常使用八进制和十六
进制来弥补二进制的不足
八进制与十六进制表示
中的任意一个
因为r
两者之间的转
换是很方便的
码和符号
故位二
间的转换也是很容易的
除了用下标来表示
后缀B表示这个数是二进制
而后缀D表示这个数是
十进制数在书写时可以省略
对于一个二进制混
数将一串二进制数分为
数部分从小数点开始往
可根据需要随意加
进制数取代之例如
转换也是很容易的
例如
据的表列出了
几种常用进位计数制对照表
表几种常用进位计数制对照表
十进制二进制八进制十六进制
各种数制间的相互转换
论的是任意进制数与
十进制数之间的转换
任意进制数转换为十进制数
乘再把乘积相加
十进制数转换为任意进制数
法对十进制数的整数
于小数部分用乘基取整法
最后把它们拼接起来
为低后余为高
例将十进制数转换成二进制数
解答采用除基取余法基数
余数低位
余数
余数高位
所以DB
数十六进制整数的
为高后整为低
解答采用乘基取整法基数
整数高位
整数
整数低位
数十六进制小数的
存在误差我们通常根
位权
则只要基本上记住
制数写出来例如
号数之分
无符号数
没有符号位相当
于数的绝对值例如
表示无符号数
此时二进制的最高位也是数值位
其权值等于
若字长为位则数的表示范围为
带符号数
号加绝
为真值
符号数码化通常约
这种在计算机中使用的表
的表示形式
的NN在这里的含
义变为
表示
补码则表示
反码则表示
表示原码X补表示补
码X反表示反码
原码表示法
值部分与真值相同
原码的定义为
解答XX原X
用原码实现乘除
个其中个正数个负数
占用了两个二进制代码
补码表示法
负有关对于正数
且在最低位上加
补码的定义为
解答XX补X
补补
码形式以便于运算
当X为正数时X补X原X
反加来求得X原
低位向高位遇到的第一
不变
例已知X原求X补
解答X原
不变取反不变
反码表示法
真值形式相同对于
个因此很容易从补
码的定义推出反码的定义
反码的定义为
解答XX反X
种机器数的比较
主要区别有以下几点
部分看待和数值位一
进行处理
有唯一的一种表示形式
负数表示范围较正数表
纯整数或纯
小数
含一位符号位
表真值与种机器数间的对照
真值XX原X反X补真值XX原X反X补
十进制二进制十进制二进制
真值是当其为补码
它既具有二进制数的
码能表示种不同的状态
而其他的种状态为冗余
生很多种BCD码表
列出了几种常见的BCD码
表常见的BCD码
十进制数码码余码
到低分别为
这种编码的主要特点是
进制数为
和十进制数相互转换的
规则
进制表示的形式一样
数它可以表示为
与B这两者是完全不同的
反就能得到该数对补
码是即将的
可以使运算器线路简化
余码
基础上加形成的
的十进制数值因而不
直观且容易搞错
它也是一种对的自补码
不允许出现这个代码在余码中是
非法码
制数
须按照一定的规则用
一组二进制编码来表示
字符编码
准字符码ASCII
个英文大写
个字符在个字符
中有个是可打印字符
一个字节右边的位
错误也可以用于西文字
符和汉字的区分标识
是按顺序排列的只要
母的二进制代码
表ASCII字符编码表
或将高位清零
排序关系又有利于实现
编码与二进制数之间的转换
的编码之间有简单的
则是小写字母利用此规
大的字符集如IBM
所用到的字符集
字符串的存放
的空间每个字节存
这种字符串的存储方法称
需要进行删除和插入操作
时将花费较多的时间
汉字编码
右要在计算机中表
与西文字符和其他字符有
明显的区别
汉字国标码
或者通信系统之间交
换用汉字编码字符集基本集
按拼音排序二级汉字
只使用低位编码因
此最多能表示出个汉字
汉字区位码
中包含个汉字位
位码汉字的区位码定长
示区号从到位号
国字在区的
位上其区位码为
以下公式表示
国标码区位码十六进制H
答案国标码为AH
第一字节第二字节
区位码十进制
十六进制
国标码HAH
汉字机内码
因为汉字处理系统
将会产生二义性例如
又可表示西文和
高位上加即
汉字机内码汉字国标码H
汉字字形码
汉字输出码在一个
的点阵结构显
越高如表所示
表汉字点阵分类
字型点阵行列字节数特征
简易型显示字体骨架
普及型有笔锋可分字体
提高型笔锋清晰字体齐全
精密型能表示复杂字型
息固定存储起来存
个点阵的基本汉字
奇偶校验码
奇数位错误但不
应用最广泛的校验码常
奇偶校验码的编码
加上一个二进制位校
整个校验码中的个数为
奇数
位n位
有效信息位
奇偶校验位
图奇偶校验码
表奇偶校验码实例
余位为信息位
奇偶校验码的校验
中的个数奇校
的个数应该为偶数个如
偶统计电路如图
形成奇形成偶
的形成电路部分
奇形成
偶校验
出错
奇校验
出错偶形成
图奇偶校验位的形成及校验电路
偶形成DDDDDDDD
奇形成DDDDDDDD
偶校验出错D校DDDDDDDD
奇校验出错DDDDDDDDD校
校验形成电路该电
校验码写入主存
若DD中有偶数个则奇形成
若DD中有奇数个则奇形成
个奇偶校验电路进行检
位上出现错误则奇校
但具体的错误位置是不能确
定的
被存放在某个
单元中存放的十六进制数
据是
码值为H而
是第号字母所以F的ASCII码值应为HB标
准的ASCII码为位
照偶校验规则偶校
应为BCH
则表明传送中
未出现错误B最低位出错
示未出现错误或有偶数
位错
交叉奇偶校验
奇偶校验位做横向校
种横向纵向同时校验的
方法称为交叉校验
各校验位取值如下
横向校验位
第一字节
第二字节
第三字节
第四字节
纵向校验位
相比要保险多了
海明检验码
就是与此类似的校验
息位中加入几个校验位形
当某一位出错后就会
指出错误的位置为自动
纠错提供了依据
两位错的海明码的编
按上述不等
表信息位N值与校验位K值的关系
值最小K值
海明码的编码方法
明码的总位数为位
可表示为
除P外其余位
都满足Pi的位号等于
校验位Pii的偶校验的结果为
其中D和D出现了次
验位令
海明码的校验
情况
当SS为时表明无错
是该Si对应的Pi位
只能发现错误而无法确
定出错的位置
号由SS位代码值指
这个错误将该位变反
作可能出现故障
表示Pi出错因为是校
示是某一信息位Di出错出
例如当SS时SS的译码值为即对应H也就
是D位出错
表海明码出错情况
海明码PDDDDPDDDPDPP
位号HHHHHHHHHHHHH
校验过程
指误字为全表明海
就变为
出错现在H错成了
纠错就是将H位取反让它恢复为即
错误码
纠正后
循环冗余校验码
存储器中广泛使用循
环冗余校验码CRC
约定关系的假设
个约定的多项式GX去除
码当整个CRC码被
确的若余数不为表明某
码的编码方法
位右边为校验位若
图循环冗余校验码的格式
循环冗余校验码编码规律如下
把MX左移K位得到MXX
选取一个K位的产生多项式GX对MXX
作模除
码此时的CRC码共有
答案生成的CRC码为
分析MXX
信息位校验位
位N位
这种CRC码称为码
码的校验与纠错
数为如果某一位出
号之间有唯一的对应关系
定点数的表示和运算
的一种表示形式定
小数点固定在有效数
定点小数的表示范围
位之后如图所
占据一个二进制位
位数值位
数符
小数点位置隐含
图定点小数格式
当XsXXXn时X为最大正数其真值等于X
最大正数
当XnXsXXn时X为最小正数其真值等于
最小正数
算机中带符号数可用补
称为最负的数或最小
负数其真值等于X绝对值最大负数
数其真值等于
绝对值最大负数
补码定点
小数的表示范围为
补码
定点小数的表示范围为
定点整数的表示范围
图所示
图定点整数格式
根据前述方法不难推出
原码表示时
补码表示时
整数的表示范围为
定点整数的表示范围为
定点数所能表示的数
溢出这时计算机将
过浮点数表示来实现
例在定点机中下列说法错误的是
除补码外原码和反码不能表示
的原码不等于的原码
的反码不等于的反码
整数来说A选项的说
现在个整数都是
负数rrrr只有rr
结果溢出其余个算式结果
都未超过不发生溢出
多大若用BCD码表示
十进制定点整数其数值范围多大
以补码进行数据表
示时数值范围为
从至有符号时
访问的所有操作数都
定点数的移位运算
不变当左移一位时
的末位尾数则数值
真值机器数添补代码
正数原码补码反码
负数
原码
左移补
右移补
反码
括进位标志位C构
成小循环
原码定点数的加减运算
对值参加运算在大
换为加法运算来实现原
码运算时用XY变补来代替XY
原码加减运算规则如下
参加运算的操作数取其绝对值
再进行加法运算
运算之后可能有两种情况
结果加上符号位
补码定点数的加减运算
计算机中多使用补码加
减运算
补码加减法运算公式
数补码之和即
补X补Y补
补XY补X补Y补
法已知Y补求Y补的方
这个实际上是
变补求补表示为
补Y补变补
一个负数由原码表示
加而变补则不论这
一起变反末位加
负数反之亦然
例已知Y求Y原Y补和Y补
解答Y原Y补Y补
补码加减运算规则
补码加减运算规则如下
符号位作为数的一部分参加运算
机器负数相加
运算结果仍用补码表示
例已知AB利用补码加减运算规则
解答A补B补
因为AB补所以AB
解答A补B补B补
符号扩展
有更多位数的某种表
要想得到正确的结果在将
为符号扩展
符号位上新表示形
式的所有附加位都用进行填充
数的符号扩展方法与
是原有形式的符号位移动
二进制补码结果用
十六进制表示为
位二进制补码
符号扩展表示为
三个变量xy和z
其中x和z为int型y为short型当xy时执行赋值语
句zxy后xy和
的值分别是
均用补码表示因
为xDByDB所以有x
执行赋值语
句zxyy需要扩展符号位之后再与x相加zxy
定点数的乘法运算
寄存器中A寄存器用
寄存器C改为存放乘积的低
位部分
又分为原码一位乘
由于通用计算机中的数据
参加运算的数用补码表示
符号位参加运算
的值决定了每次应执
行的操作如表所示
移位按补码右移规则进行
共需做n次累加n次移位第n次不移位
表Booth乘法运算操作
判断位YnYn操作
原部分积右移一位
原部分积X补右移一位
号位Booth乘法的流
程如图所示
图Booth乘法流程图
例已知XY求XY
答案XY
分析有X补BY补CAX
因为XY补所以XY
定点数的除法运算
和除数C寄存器
干倍的余数
法加减交替法根
除法第一步根据被除
数的符号位共同决定同
号上商异号上商最后一步商恒置
和余数也用补码表示
表补码加减交替法规则
同号X补Y补
同号够减ri补ri补Y补
异号不够减ri补ri补Y补
异号X补Y补
同号不够减ri补ri补Y补
异号够减ri补ri补Y补
图补码加减交替除法算法流程图
致的情况这是没有
符号位并没有发生变化
分析有X补AY补BC
因为
所以
补码加减运算的溢出判断
果的符号位却为结
此时的结果显然是错误的
机器允许的表示范
示当运算结果大于
小于
时就产生溢出
为负且小于所能表示
生的溢出称为正溢反之
两负数相加产生的溢出称为负溢
假设被操作数为X补XsXXXn
操作数为Y补YsYYYn
其和差为S补SsSSSn
常见的溢出检测方法有种
采用一个符号位
当XsYsSs时产生正溢当XsYsSs时产生负溢
溢出判断条件为溢出sXsYSsXsYssS
采用进位位
两数运算时产生的进位为CsCCCn
时发生正
进位Cs时发生负
溢故溢出条件为溢出sCCCsCCsC
采用变形补码双符号位补码
又能指出结果的符号
了该数真正的符号两个符
双符号位的含义如下
结果为正数无溢出
结果正溢
结果负溢
结果为负数无溢出
浮点数的表示和运算
为上述约定的两种定
定点小数或扩大成定
同样的比例因子来处
引入了浮点数据表示
是带符号的定点数
的实际位置M叫做尾数
的正负
浮点数的表示范围
值位位数不包括符号
器数中不出现
尾数部分M阶码部分E
位n位位位
图浮点数的一般格式
为最大正数时该浮
点数为最大正数X最大正数
值最大的负数尾数为
为最大正数尾数为
大负数
规格化浮点数
浮点数规格化形式
可以表示为
而其中只有
是规格化数
如果r则有
总等
符号位不同msm
即当
时应有xxx形式当M
时应有xxx形式
一个规格化
这是一个规格化数
规格化的最小正数
规格化操作就是通过
点数在尾数的最高数位上
保证是一个有效值
阶码共k位含一
位阶符尾数共n位含一位尾符
表浮点数的典型值
浮点数代码
阶码尾数真值
绝对值最小负数
规格化的绝对值最小负数
负上溢正上溢和负
进行溢出处理当运算
最小负数之间称为负下溢
做任何处理仅仅置成机
器零即可
浮点数阶码的移码表示法
任何一种机器数的表
移码表示法
当于X在数轴上向正方
码或偏码即
移偏置值X
例已知X求X移
解答X移
而此时X补
出了偏置值为
的移码
与补码和真值之间的关系
表偏置值为
的移码补码和真值之间的关系
真值X十进制真值X二进制X补X移
这与原码补码以及
反码的符号位取值正好相反
值最大因此移码的
大小比较
直接按无符号数规则比
较大小
码小的对应的真值就小
示机器零
移码表示以为
规格化分别写出下列
非零最小正数
此时阶码为绝对值最大
均为最大正数
码为绝对值最大的负数
尾数为规格化的绝对值最小负数
为最大正数尾数为绝
对值最大负数
分最高位应与其补码
相反
标准
部件在这些机器中的
尾数部分用原码表示
图IEEE标准的浮点数格式
表IEEE标准中的种浮点数
类型数符阶码尾数
数值
总位数偏置值
十六进制十进制
短浮点数FH
长浮点数FFH
临时浮点数FFFH
们都采用隐含尾数最
为扩展精度浮点数它没
有隐含位
最高位为数符位其
位是尾数数值位对于规
表示一位有效值可将这个
隐含的是一位整数即位权为
其中整数部分的将不
存储在位尾数内
长浮点数偏移量为
值上上述例子中阶码
长浮点数中为
例将转换成短浮点数格式
答案短浮点数格式为CH
转化成规格化二进制数有
以短浮点数格式存储该数
因为符号位阶码尾数
所以短浮点数代码为
表示为十六进制的代码CH
例把短浮点数CCH转换成为十进制数
答案十进制数为
阶码和尾数
因为CCH
所以有符号位阶码尾数
计算出阶码真值移码减去偏置值
以规格化二进制数形式写出此数
写成非规格化二进制数形式
的阶码f是尾数的小
数部分
格化浮点数的加减运
算问题其中尾数的基数r
设两个非的规格化浮点数分别为
浮点数的加减运算步骤
格化等步骤
对阶
小数点的实际位置取
等这个过程称为对阶
若E表示EAEB若E表示EAEB若E表示
阶的规则是小阶向
到两数的阶码相等为止如
无需对阶
则MB右移每右移一位EBEB直至EAEB为止
则MA右移每右移一位EAEA直至EAEB为止
尾数加减运算
对阶之后就可以进行尾数加减即
尾数结果规格化
字的位数提高运算精
种情况即
个过程称为左规尾
止只要满足下列条件
左规sCsCCCsCsC
符号位C为MC的最高数
值位
只表明此时尾数的
规格化这个过程称为右规
右规CsCs
右规最多只有一次
舍入
许多种常见的舍入
方法有
分q位为何代码一律
低位之后的全部数值
部分q位为何代码都把
保留部分p位的最低位置
入用将要舍去的q位
舍去整个q位相当于恒舍
溢出判断
和差出现xxx
码来判断浮点运算结果是否
溢出
示当
停止运算做溢出中断
处理
零处理
浮点数加减运算举例
有两浮点数为
移码偏置值为
阶码尾数
首先对阶求阶差EEAEB
表示EAEB按对阶规则将MB右移一位EBEB得
接下来尾数求和
减最后结果为
未发生溢出
舍入和判溢出等步骤
均含位符号位若有
两个数X
则用浮点加法计算XY的最终结果是
发生溢出
入和判溢出等步骤
第一步对阶第一个数X
浮点数格式为第二个数Y
两位EY浮点数格式
为第二步尾数相加MZMXMY浮点
数格式为
右移一位EZ浮
同所以发生溢出
算错误只是它们
例假定变量ifd数据类型分别为intfloat和double
用补码表示float
仅和B仅和C仅和D仅和
故的结果不为真df
再减去d后结果为
故的结果也不为真
法器的全加器个数是
串行加法器
运算如果操作数长n
进位触发器用来寄存进
位信号以便参与下一次的运算
去某些低速的专用运
算器外很少采用
并行加法器
数据的各位同时运算
算时间问题这是因为虽
位的运算结果例如
并行加法器的最长运算时
延迟只是次要因素很明
并行加法器的进位产生和传递
个传送给高位的进位
为进位链每一位的进位
表达式为
为进位传递函数低位
为串行进位的并行加
依赖于前一级的进位即进
位信号是逐级形成的
图串行进位的并行加法器
其中CGPC
延迟时间就越长
并行加法器的快速进位
度就要尽可能的减
并行进位方式
不依赖于其低位的进位
的与字长无关但是随着
越来越多这会使电路结
分组并行进位方式
分为若干小组在组内
可以采用并行快速进位方
式因此有两种情况
器为例可分为组
与前述相同CC信号是
成位的CLA加法器
如图所示
加法器
图位单级先行进位加法器
长为位的加法器作
出C可以写为
其中G
称为组进位产生函数Pi
次类推可以得到
路称为成组先行进位
和求和电路可以构成
和个CLA电路组
成如图所示
电路
加法器加法器加法器
位BCLA位BCLA位BCLA
图位两级先行进位加法器
行进位结构设计位
键因素是
门电路的级延迟B元器件速度
接的方法就是多位并
位传递延迟对并行加法器
的影响最为关键
由于无论是加减
当是一个并行加法器同
由于ALU能完成多种功
能所以ALU又称多功能函数发生器
已相继问世为了
应用
逻辑为例的的算术
逻辑运算功能
表的算术逻辑运算功能表
工作选择
负逻辑
逻辑运算
算术运算M
无进位
有进位
加ABFA加AB加
加ABFAB加AB加
减B减FA减B
加BFA加B加
加A加
加AFAB加A加
加AA算术左移一位
的值用来区别算术还
时做逻辑
运算AB当MSS时做算术运算此时若Cn完
成A加B若Cn完成
加B加
第三章存储器层次结构
结构系统本章讨论
作原理和组成方式以及
口RAM多模块存储器
一存储器的分类
的可保存性分类
二存储器的层次化结构
多级存储层次
三半导体随机存取存储器
存储器的工作原理
四只读存储器
五主存储器与CPU的连接
硬连接和软连接
六双口RAM和多模块存储器
七高速缓冲存储器Cache
程序访问的局部性原理
的基本工作原理
和主存之间的映射方式
中主存块的替换算法
写策略
八虚拟存储器
虚拟存储器的基本概念
页式虚拟存储器
段式虚拟存储器
段页式虚拟存储器
存储器的分类
根据不同的特征可对
存储器进行分类
的程序段和数据以
速度相匹配但存储容
作在CPU芯片中
机地进行读写访问
所以主存的性能在很大程
数据以及一些需要永
取速度较低而且CPU不
按存取方式分类
随机存取存储器RAM
何一个存储单元的
无关RAM读写方便使
只读存储器ROM
一旦写入存储器就固
储器ROM除了存放某些
数发生器字符发生器及
微程序控制器中的控制存储器
顺序存取存储器SAM
上的物理位置有关
是这样一类存储器
直接存取存储器DAM
域如磁盘上的磁道
写操作这种存储器的存取
磁盘机就属于这类存储
按存储介质分类
磁芯存储器
芯存储器的读出是破
芯的内容一律变为
开始已被半导体存储器
逐渐取代
半导体存储器
电路或ECL电路
存取速度较慢等特点双
特点半导体RAM存储的
信息会因为断电而丢失
磁表面存储器
的有磁盘磁带等
光存储器
可改写式种它们的
按信息的可保存性分类
体RAM断电后信息
磁表面存储器和光存储
称破坏性读出如果
坏性读出性能的存储器
恢复被破坏的信息
存储器的层次化结构
存储容量不同存取
存储系统
器MMn在逻辑
度最慢容量最大位价
接近于Mn的位价格在
用的在Mn中
存储层次
图多级存储层次
时间和每位价格
分别为MSTAC和MSTAC
存储层次的平均每位价格为
当MSMS时CC
程序执行期间
行过程中访存
分析Cache的命中率H
减去失效次数
所以H
率对于两级存储
层次失效率为H
假设Cache不命中时才启动主存TAHTAHTATA
存储层次的访问效率
主存完成存取的次数为
分别求当Cache不命中时
才启动主存
的命中率H
等效访问时间TA
主存系统的访问效率e
答案HTAnse
分析解H
以分为两个层次其
如图a所示主存
主存
辅助硬件
主存辅存
辅助软硬件
图两个存储层次
用程序员都是透明的
不透明的但对应用程序
员是透明的
半导体随机存取存储器
两种
多个记忆单元构成一
高速缓冲存储器和小
容量主存系统
栅极电容上的电荷
掉所以每隔一定的时间
的刷新间隔
再生是两个完全不
破坏性读出之后才需要重
补充电荷的话信息也会
的一行为单位进行的
的刷新方式
集中刷新方式
中安排若干个刷新周期
刷新时停止读写操作
刷新时间存储矩阵行数刷新周期
读的过程所以刷
新周期就等于存取周期
芯片进行刷新刷新
期以完成全部记忆单元的
个存取周期从
安排刷新操作如图
刷新间隔ms
读写操作刷新
个周期s个周期s
图集中刷新方式示意图
的存取速度比较高
而且存储容量越大
死区就越长
分散刷新方式
存取周期被分为两部
作在一个系统存取周期
内刷新存储矩阵中的一行
则系统的存取周
需要s如图所示
刷新间隔s
周期周期周期
读写读写读写刷新刷新刷新
图分散刷新方式示意图
明显的缺点一是加长
中每s就重复刷新一遍
新间隔ms
异步刷新方式
新间隔时间把刷新
刷新时间间隔ms
写如图所示
图异步刷新方式示意图
为s这样可以避
的一种刷新方式
刷新控制
的刷新要注意以下问题
是芯片内部的刷新地址
明的
新故刷新操作时仅需
要行地址不需要列地址
给栅极电容补充电荷
中的所有芯片同时被刷新
个芯片的存储容量着手
而不是从整个存储器的容量着手
例动态RAM的刷新单位是
存储单元B行C列D存储位
为单位进行的一行
中的各记忆单元同时被刷新
只读存储器
把向ROM写入数据
为几类
掩模式ROMMROM
直接写入的写入之
后任何人都无法改变其内容
是用户对制造厂的
依赖性过大灵活性差
一次可编程ROMPROM
写入后其内容将无
法改变
根据需要可自行将其
所以只能进行一次性写入
可擦除可编程ROMEPROM
行多次改写
记忆单元改为
以便再写入新的内容
使芯片中原存内
要改写的存储单元单独
芯片上的透明窗口封住
除方式擦除也可
中的那个存储单元的内容
闪速存储器Flash
主要特点是既可在不
了EEPROM和RAM的优点
例下述说法正确的是
是只能改写一次的只读存储器
机存储器也不能当
做随机存储器使用
例下列有关RAM和ROM的叙述中正确的是
和ROM都可用作Cache
和ROM都需要进行刷新
仅和B仅和C仅D仅
同区别在于RAM
主存储器与CPU的连接
放计算机运行期间
程序或不需要修改的数据
的工作区
主存储器的基本结构
框图如图所示
存储体地址线数据线
读写控制线
地址译码驱动
和读写电路
图主存的组成框图
完成被选中存储单元中
各位的读出和写入操作
器的读写命令或写允
主存储器的存储单元
个二进制数由若干位
储字存放存储字或存储
成一个存储体
机的结构确定的对
地址指向相邻的存储字节
址指向相邻的存储字所
个存储字包含个单独
案即字地址等于最高有效
每一个存储字包含个单独
案即字地址等于最低有效
字节地址
字地址
字节地址字节地址
式则十六进制数
地址位置
主存容量的扩展
接起来的问题根据
芯片数即
总片数
总容量
容量片
片片
区按字节编
则需要上述规
格的ROM芯片数和RAM芯片数分别是
分析ROM区为KB选用K位的ROM芯片需要
片采用字扩展
方式KB的RAM区选用K位的RAM芯片需要
片采用字和位同时
扩展方式
位扩展
器的字数是一致的
地并联起来而将各芯片
的数据线单独列出
例用K的SRAM芯片设计一个K的存储器
解答所需芯片数为
在这种情况下CPU将提供根地址线
根数据线与存储器相连而存储
地址线AA分别连在一
只有数据线DD各自
独立每片代表一位如图所示
芯片组
等效为
地址总线数据总线
图位扩展连接举例
选中每个芯片的同
线上的内容分别同时写入
相应单元
字扩展
线数据线读写线
并联由片选信号来区分各个芯片
例用K的SRAM设计一个K的存储器
而存储芯片仅有根
读写控制信号WE都是同名
产生个片选信号iCS分
别选中个芯片中的一个如图所示
图字扩展连接举例
选中第一片AA选中第二片
配如下
第一片最低地址BH
最高地址BFFFH
第二片最低地址BH
第三片最低地址BH
最高地址BBFFFH
第四片最低地址BCH
最高地址BFFFFH
字和位同时扩展
上同时扩展这将是
译码器
图字和位同时扩展连接举例
存储芯片的地址分配和片选
址分配是一个重要的
然后再从选中的芯
字选片内的字选是由CPU
址输入端N由片内存储容
线选法
接至各个存储芯片的
这些片选地址线每次寻址
选中一个芯片或组
表所示
表线选法的地址分配
芯片AAAA地址范围空间
逻辑电路但仅适用
储器空间且把地址空间
全译码法
入译码器的输出作
对存储芯片的选择
且是连续的也便于
的存储器全
都要参与译码各芯片的
地址范围如表所示
表全译码法的地址分配
芯片AAAAAA地址范围空间
部分译码
选信号如用片K
用两位地址线来译码产生
取何值只要
则选中第一片只要AA则选中第二片
也就是说KRAM中
的任一个存储单元都对应有
址重叠
本例中K存储器
在地址重叠区
例地址总线A高位A低位用K的存储芯
片组成KB存储器
的低位即AA
作为译码器的输入
地址BFH所在芯
片的最小地址是
位同时扩展每组中
第二组HFFFH
第三组HFFH第四组HFFFH所以地址BFH所
在芯片的最小地址为
例某机CPU可输出数据线条DD地址线条
控制线
位的ROM芯
片KB为RAM拟用K的RAM芯片
需要两种芯片各多少片
写出ROM和RAM的地址范围
答案ROM芯片片RAM芯片片
与存储器之间的连线图如图所示
图例中CPU与存储器的连接图
的地址范围是ROM为HFFFHROM为H
的地址范围是RAMRAM为HFFFHRAMRAM为
分析ROM芯片
片RAM芯片
是单向的RAM的数
不连接至ROM
还有片选信号的连接问题
表主存储器地址分配
所选芯片
选片地址
片内地址
译码输
地址分配
主存储器和CPU的连接
面提到的存储芯片之
通过地址总线AB
存储器地址寄存器MAR
受来自程序计数器PC
元MDR是向主存写入数
但在小型计算机微型
计算机中常放在CPU内
主存容量
字长n位
地址总线
图主存和CPU的硬连接
或写还需要两个部件
之间有效工作的关键
然后发出相应的读
再送给CPU其操
作过程是
地址MARABCPU将地址信号送至地址总线
发读命令
等待存储器工作完成信号
读出信息经数据总线送至CPU
操作过程是
发写命令
双口RAM和多模块存储器
速元件来提高访问速
可以并行地读写多个字
从而提高存储器的访问速度
双口RAM
一种高速工作的存储
线可以对存储器中任何
个端口所共用当两
生冲突当任一端口被选
选控制和输出驱动控制
成数据存储或读取错
况会出现写入错误
双口RAM设计有硬件
同时操作同一单元时会
多模块存储器
独立的地址寄存器
作又能交叉工作
分别是高位交叉编
码的低位选择存储单
地址码的高位选择存储单
之为模交叉编址序列
表模交叉编址
块内的地址都是不连
方法可以在不改变每个
成为现代计算机存储
系统中不可缺少的组成部分
局部性是指如果一个
指如果一个存储单元被访
分存放在一个高速的
而使程序的执行速度大大
提高
小相等的块每块
中的块数要远少于主
中若命中则
标记
替换算法
比较器
来自CPU
或来自CPU
块内地址
块号
块号标记主存地址
访标记
修改标记
访数据
直接通路
不命中
命中
单字
多字
图Cache的基本结构
与主存无关如果
内若此时Cache已满
容能否保持一致是
命中有可能会遇到
某单元中的内容从X
如果Cache命中需要按照
存中读入Cache
也就是把存放在主存
全相联映射
何一个块的位置上如
最低空间利用率最高但
直接映射
指定位置若这个位置
映射是最简单的映射方式
概率最高空间利用率最低
映射到Cache的第块而
关系可定义为
式中K为Cache的块号I为主存的块号
为Cache块数
组相联映射
映射装入Cache中对应
的块容量为Cache的容
射和直接映射的折衷方案
存的第块将可以映射到
第组
图种映射规则
即每组块每
应装入到的Cache组号是
存块号的公式主存
块号块大小主存地址
的映射关系主存第
块装入Cache第组中
而Cache中的空间已
述种
随机算法
在及将来的使用情况
先进先出FIFO算法
要更新时将最先进入
其缺点是可能会把一些需
换掉
近期最少使用LRU算法
需要随时记录Cache
法相对合理但实现起来
比较复杂系统开销较大
更新策略Cache有两
种更新策略写直达法和写回法
存这种方法实现简
主存写入会降低存取速
存仅当需要替换时
块表中一般有一个标
置在需要替换掉这
之后才能再调入新的块
覆盖掉这一块即可这种方
不命中时还涉及
按写分配法则除了
达法宜用不按写分配法写
回法宜用按写分配法
据Cache中最多存放
了位有效位采用一次
址Offset部分的位
置和位数
计算该数据Cache的总位数
址字段在后位
中有个主
字段为位标记字段为
剩余位位
每个Cache块对应一
回法故标记项的总位数
位数据块位数
位所以数据Cache
的总位数位
指令Cache和数据Cache
直接映射方式现有
在寄存器中数组a
要求说明理由或给出计算过
的总容量为多
行号分别是多少Cache
行号从开始
更短
答案B程序A的执行
过程更短
用于Cache一致
数据Cache容量为BCache地址为位有个Cache行块
号位块的大
主存地址位
格式见图
图主存和Cache的地址格式
采用直接映射方
式a的地址为B主存块对
应的Cache行号为B
的地址为B主存块
对应的Cache行号为
数组a存放的数据量为B
占用
个主存块按行优先
次未命中次数
于是程序A的
数据访问命中率为
访问第列每个元
后续列元素时仍然不命
中于是程序B的数据访问命中率为
虚拟存储器
器共同组成这两
可以把它们看作是一个单
一的存储器
储空间在这个大空
及这些程序将来在主存中
主存单元地址称为实地址
送入磁盘然后操作
行部分留在磁盘中
实地址之间的对应关
已在主存中则通过地址
含这个字的一页或一个程
存中将暂不运行的一页或
大小不等一般为B
即实存的页称为实页虚
存的页称为虚页
址虚地址到实地址
和实页号的对照表记录
道程序工作方式则可为
放当前所运行程序的页表
的起始地址
装入位和实页号等
可读到一个页表信息字
页面已在主存中将对应的
入位为表示该页面
供CPU使用图给出
页表起始地址
页表
实页号
虚页号
页内地址
页表地址
页表基址寄存器
虚地址
实地址
图页式虚存的虚实地址变换
问一次主存若不命
调入也容易实现但
用而造成浪费同时页
度因程序而异为了
录了某个段对应的若干信
装入位为表示该
的大小可变所以在段表中
段与其在主存中所存放的
位置之间的关系对照表
于程序的编译管理
起点和终点不定给主
序按其逻辑结构分段
的页虚存和实存之间以
访问时虚地址包含
成得到段表地址然后从
最后从页表中取出实页
结构的优点但要经过两
个页访存通过一个
必须是某一页的起点
低几倍这是因为在
储器中既要查段表也要
查页表
度由于程序在执行
在一段时间内对页表
低到最低限度许多计算
个小容量的高速存储器中
中查找实页号与快表相
而且只存放了慢表中很少
的一部分
其访问速度接近于快
表的速度存储容量是慢表的容量
访问
的叙述中正确的
查找速度快
中称为快表与快
本而且只存放了慢表中
未命中Cache未命中Page未命中BTLB未命中Cache命
中Page命中
命中Cache未命中Page命中DTLB命中Cache命中
未命中
若TLB命中则Page
必命中因此不可能发生的是D
第四章指令系统
某些操作的命令一
令系统是计算机的主要属
性位于硬件和软件的交界面上
一指令格式
指令的基本格式
操作码字段和地址码字段
定长操作码指令格式
扩展操作码指令格式
二指令的寻址方式
有效地址的概念
数据寻址和指令寻址
常见寻址方式
变址寻址相对寻
址页面寻址堆栈寻址
三CISC和RISC的基本概念
指令格式
度地址码结构以及
表示方法指令功能设计
等都密切相关
指令的基本格式如
操作码字段地址码字段
的地址
与机器字长没有固定
把指令长度等于机器字
半字长指令指令长度等
字结构定长结构指
就称为变长指令字结构
指令的控制较复杂
一般的双操作数运算
第一操作数地址
第二操作数地址
操作结果存放地址
事先的约定用隐含
址指令二地址指令一
地址指令和零地址指令
三地址指令
三地址指令格式为
放地址
这条指令的含义AOPAA
二地址指令
样即得到了二地址指
令其格式为
指令的含义AOPAA
一地址指令
虽未明显给出但按
个寄存器在连续性运算时
指令的含义ACOPAAC
零地址指令
计算机中必备的通用
通常参加运算的两个操
进行运算运算的结果再
隐含地压入堆栈中
序存储量最长而
指令的长度一个比一个短
就称为定长操作码指
部指令指令的操作码字
段应当具有足够的位数
如下关系式
所以Nlogm
在字长较长的大
论指令的长度为多少位其
上在IBM机中仅有
操作码
在指令字的不同位置
码字段的平均长度在字
位置不固定将增加指令译
定则地址码与操作
数多的指令三地址指令
的操作码字段长些这样
扩展操作码的位数使它
能表示更多的指令
的地址码字段其格式
和零地址指令请利
大于条
示条不同的三地址指
条一地址指令和条零
方法就是向地址码字段扩展
操作码的位数扩展的方法是
作为扩展窗口与下
一个位A组成一个位的操作码字段
留下作为扩
位操作码的编码定义了条一地
址指令扩展窗口为
与A组成位的操作码字段
但有两点要注意
代码相同否则将无法保
证解码的唯一性和实时性
安排应统一规整
指令的寻址方式
讨论寻址方式首先
来源和去向而操作数则
中的通用寄存器主存储
等进行访问首先必须对它
上一个唯一的号码人们
才能据此找到需要的房间一样
址单位有关联的
果以字节为最小寻址单位
如果以字为最小寻址单
操作比较困难例如某
机主存容量为
其地址码
字寻址其寻址
单元数是
分析MB
单元每个存储单元中存放位
们把指令中地址码字
能直接用来访问主存例如
位仅能直接访问主存
机中即使指令中能够拿
制程序也需要对地址进
行必要的变换
址经过某种寻址方式
的转换才能变为有效地址即
寻址方式
指令中的形式地址有效地址
址称为指令寻址寻
为顺序寻址和跳跃寻址
跃寻址则需要通过程序
转移类指令实现
寻址它与数据寻址方
数的有效地址而是转移的
有效地址而已
址方式的名称和含义
立即寻址
不是通常意义上的操
取出指令也就取出了可
立即数
必再次访问主存从
能被修改而且立即数的
寄存器寻址
个指定的寄存器中存
器它的内容是从主存中取
操作数
图寄存器寻址过程
得多
直接寻址
址等于有效地址
的位置无关所以又叫做
的关系为
但地址空间受到指令
中地址码字段位数的限制
直接地址OPIR
图直接寻址过程
间接寻址
操作数地址的主存单元
直接或间接寻址的标志位
间接寻址时标志位
址中首先按指令的
按此有效地址从主存中读
有效地址后还需再
级间接寻址来说在寻址过
通常将这个标志放在主存
地址需要继续间接寻址
出真正的操作数
间接地址OPIR
有效地址
一级间址OPIR
二级间址
三级间址
图间接寻址过程
的位置当操作数的地
单元的内容就可以了
降低了取操作数的
甚至可能发生间址循环
寄存器间接寻址
即指令中的地址码给
地址而操作数则存放在
关系为
有效地址EA
图寄存器间接寻址过程
作数因此指令执行
速度较间接寻址方式快
变址寻址
加形成操作数有效地
示操作数S与地址码和变
址寄存器的关系为
变址值X
图变址寻址过程
址寄存器的内容作为
址值就可以了这对于数
址寻址标志当有多
相对寻址
的内容是指
两者相加后得到操作数的有
指令
指令地址
图相对寻址过程
这种寻址方式有如下两个特点
指令地址之间总是相差
与指令在可用的存储区内
写的程序可在主存中任意
因此指令中给出的位
址的寻址范围为
寻址由两个字节组
指令时每取一个字节PC
内容为H则该转移指
令成功转移后的目标地址是
由于转移指令由两个
令成功转移后的目标地址
了PC要自动更新但
页面寻址
称为一页每页有若
个页面中有个字节如
每个主存单元也有自己的编
部为页面地址在此例中
部分自动直接提供它与
因此寻址迅速根据页面
地址EAA在这
页寻址实际上就是直接寻址
所以有效地址
成有效地址如图d
页面号
当前页面
页寄存器
图页面寻址过程
令格式中设置了一个
页寻址
堆栈寻址
后进先出LIFO
域在堆栈容量很小的情
各寄存器是相互连接
容推移到相邻的另一个寄
从主存中划出一段区域来
大小可变栈底固定栈
指针SP栈指针所指
定的存储单元就是堆栈的栈顶
堆栈的栈底地址大于
栈指针SP的内容需要先自
弹出然后SP的内容再自动
加进出栈的过程可描述如下
进栈
修改栈指针
将A中的内容压入栈顶单元
出栈
将栈顶单元内容弹出送入A中
栈顶单元地址SP
表示栈顶单元的内容也就是说EASPSSP
为SP指示的栈顶
么出栈操作的动作顺序应为
以上都不对
时是先压入数据
然后才能弹出数据
也可以把它们中的某
也可以在寄存器中
同的其中速度最快的是
立即寻址最慢的是多级间接寻址
方式通常有两种显
二进制编码来表明寻址方
明指令格式并隐含约定寻址
方式如图b所示
形式地址
由操作码隐含指出寻址方式
图指令中寻址方式的表示
寻址方式例如源
置该指令将指
第二个字是地址部分
图寄存器与主存内容示意图
中装入AC的值
寄存器R寻址
寄存器R间接寻址
装入AC的是
将装入AC
由此得到有效地址为
操作数是
相对寻址时有效地址EAPCA
所以操作数是这
新为下一条指令的地
变址寻址时有效地址EAXRA
所以操作数是
寄存器寻址时R的内容装入AC
数是
址采用定长指令
格式指令各字段定义如图所示
图指令格式
义如表所示
表寻址方式定义
寻址方式助记符含义
寄存器直接Rn操作数Rn
寄存器间接Rn操作数Rn
寄存器间接自增Rn操作数RnRnRn
相对DRn转移目标地址PCRn
用寄存器存储器地址
转移指令的目标地址范围是多少
的编号分别为B
和BR的内容为HR的内容为H地址H的内容
为H地址H
作数逗号后为目的操作数
存器和存储单元的内容会
改变改变后的内容是什么
答案PCPC
条指令地址码字
可以有
个通用寄存
个存储单元
故MDR和MAR至少各需位
汇编语句addRR对应的机器码为
该指令执行
内容分别为
和RISC的基本概念
能设置更为复杂的
能提供指令的执行速度
基本的指令类型
下列几种类型的指令
数据传送类指令
器之间寄存器与主
可以细分为下列几种一
址而源地址中的内
和出栈POP两
一个字节或一个字
相互交换位置
运算类指令
减乘除指令以
大多数算术运算指令都会
偶等
没有设置专门的位操
进行操作如按位测位
左移和右移两种
程序控制类指令
析与判断的能力主
址若采用相对寻址
即PC位移量PC
能调用它通常把一
在需要时由主程序调用
其他程序调用的程序
自己即子程序递归
其助记符一般为CALL
址指令
在着很大的差别
的问题所以没有返回
地址以便返回时能找到
原来的位置
段子程序实现的是不
同程序之间的转移
多种其中最常用的
实现多重转子和递归循环
子程序的最后一条指
如果返回地址保存在堆栈
中则返回指令是零地址指令
例下列不属于程序控制指令的是
控制指令
输入输出类指令
各种不同计算机的IO
外部设备编号端口
来实现IO操作一个外
每个外设寄存器都可以由
访问外部设备的寄存器
复杂指令系统计算机CISC
随着VLSI技术的迅
系统中增加更多的指令和
统设计的计算机称为复杂
扩展的指令集
了设计失误的可能性
速度通过对传统的CISC
用的是一些比较简单的指
占其余大多数指令
占因此人们把这
令系统合理性的研究于是
精简指令系统计算机RISC随之诞生
精简指令系统计算机RISC
作指令指令格式力
求一致大部分RISC具有下列特点
指令总数较少一般不超过条
完成
在寄存器之间进行
少用微程序控制实现
表列出了CISC和RISC的区别
表CISC和RISC的区别
指令系统复杂庞大简单精简
指令数目一般大于条一般小于条
指令字长不固定等长
寻址方式一般大于一般小于
可访存指令不加限制只有LOADSTORE指令
通用寄存器数量较少多
例下列关于RISC的叙述中错误的是
普遍采用微程序控制器
的内部通用寄存器数量相对CISC多
确的只有A选项
微程序控制器详见第五
案最好的方法是采
用排除法
第五章中央处理器
本章着重讨论CPU
令流水线的基本概念
一CPU的功能和基本结构
二指令执行过程
三数据通路的功能和基本结构
四控制器的功能和工作原理
硬布线控制器
微程序控制器
址的形成方式
五指令流水线
指令流水线的基本概念
超标量和动态流水线的基本概念
的功能和基本结构
内部结构入手为
的功能
了指令流和数据流
求依次存取数据的序列
时间与空间上实施正确的
数据进行加工具体
功能包括
控制程序的顺序执行指令控制
的基本结构
控制信号
图CPU模型
的主要功能是执行所
志寄存器PSWR指令译
存中取出指令并对指令
的范畴
中的主要寄存器
终结果以及控制状
寄存器计数器地
由程序编址访问
果信息运算器中至
少要有一个累加寄存器
要有个专用的寄存
器数据寄存器和状态标志
寄存器
程序计数器PC
制指令的顺序执行在
即可实现程序的转移
指令寄存器IR
于指令寄存器之后
实现指令的全部功能
存储器数据寄存器MDR
数据字反之当向
据寄存器中
从主存中读出指令
状态标志寄存器PSWR
表征程序和机器运行
内容一是状态标志如
响到这些标志位二是控
制标志如中断标志陷阱标志等
存储器地址寄存器MARB程序计数器PC
存储器数据寄存器MDRD指令寄存器IR
员不可见
器AC一个状态寄
示信息传送方向
标明个寄存器的名称
简述取指令的数据通路
图某机的CPU结构
令寄存器IRc为
存储器地址寄存器MARd为程序计数器PC
取指令的数据通路PCMARMMMDRIR
指令LDAX的数据通路XMARMMMDRALUAC
指令ADDY的数据通路YMARMMMDR
指令STAZ的数据通路ZMARACMDRMM
指令执行过程
和执行阶段
取指令阶段
存器中去具体的操
作如下
并送地址总线AB
将MDR的内容送至指令寄存器IR中
为公共操作完成取
各部分的工作流程
存储
图取指周期的工作流程
例取指令操作
受到上一条指令的操作码控制
受到当前指令的操作码控制
受到下一条指令的操作码控制
至指令寄存器中去
分析取数阶段
此时计算机进入分析
同所以分析取数阶段的
操作是各不相同的
执行阶段所以无须
算出操作数的有效地址
主存中则要到主存中去
要多次访问主存才能取出
要的操作数的个数不同
分析取数阶段的操作也不同
执行阶段
存储起来完成执行
阶段任务的时间称为执行周期
一条指令如此周
存储器中CPU区分它
们的依据是
放在同一个存储器中
取指阶段取出的是指令
和取数据时地址的来源是
部件或指令的地址码字段
令之后才会将其
数据的
数据通路的功能和基本结构
器之间的连接线路
通路才能确定相应的微
操作控制信号
时间上先后有序的最
部数据通路密切相关的
字母加下标in表示该
下标out表示该部件的发送
等就是这类微操作信号
指令译码器
地址线
数据线
总线
时钟
图CPU的数据通路
加法指令ADDRR
作数再与R中的内
取指周期
记作MMARMDR
至此指令被
使PC内容加记作PCPC
取数周期
存器R中
向主存发读命令记作Read
同时MDRout和Yin
有效记作MMARMDRY
执行周期
和ALUin有效同时CU向ALU发ADD控制信号使R的内
容和Y的内容相加
结果送寄存器Z记作RYZ
和MDRin有效将运算结果送MDR记作ZMDR
向主存发写命令记作Write
转移指令JCA
若上次运算结果无进
的内容加位移量相应
的微操作序列如下
和Yin有效记作PCYC
和ALUin有效同时CU向ALU发ADD控制信号使IR
中的地址码字段A
和Y的内容相加结果送寄存器Z记作AdIRYZC
和PCin有效将转移地址送PC记作ZPCC
据通路结构如图
制信号MDRinE为表
假设MAR的
即将R中的
所指主存单元中保存
图某机的数据通路
功能和有效控制信号
个节拍的功能和有效控制信号
时钟功能有效控制信号
指令译码无
加in表示该部件
后加out表示该部件的
内部采用单总线结构
必须与给出的数据通
路结构一致
能和有效控制信号
码器中去译码即可所以
只要读懂了取指阶段的功
件难事了
指令地址送MAR
从DB打入MDR同时
控制信号即完成
取出的指令送指令寄存器的功能
根据加法指令ADDRR的功能RRR可知参
加运算的一个操作数在主
完成主存中取操作数的功
数据地址来自于寄存器R
送寄存器ACCC节
中的内容R的内容
收控制信号将写入
将数据写入主存单
控制器的功能和工作原理
规定的动作
控制器和微程序控制
其他部分是大同小异的
其控制单元是由门电
最少器件数和取得最高操
作速度为设计目标
使得设计调试维
加新的控制功能是不可能
控制器的基本组成
的图给出了控
微操作
信号发生器
地址形成部件译码器节拍发生器
时钟中断控制逻辑
状态寄存器
操作码地址码
中断
控制台信息
状态信息
运行状态
微操作命令序列
结束
指令寄存器IR脉冲
启停
逻辑
图控制器的基本组成
指令部件
序计数器PC指
寄存器中的指令只有
并产生相应的控制信号提
供给微操作信号发生器
在微小型机中可
时序部件
地进行信息传送加
发生器等
提供基准信号
逻辑将计算机启动后
拍信号发生器后产生
微操作信号发生器
的不可再分割的操作
器指令具有不同的微操作
序列
中断控制逻辑
在后面章节中专门介
控制器的硬件实现方法
映控制单元外特性的框
的时序信号和被控制功能
操作码译码输出
微操作控制信号
时序信号各部件状态
反馈信号
图微操作信号发生器示意图
信号等输出的微操
制信号
控制器的时序系统
由于各种指令的操
期每个机器周期完
行周期和中断周期等所
以有
指令周期i机器周期
一条指令所需的最
时执行有的需要按
段每一个时间段对应一
个电位信号称为节拍电位信号
运算寄存器间的
一次传送等
此不同机器周期内
统一节拍法
最繁的微操作作为标
使得所有的机器周期长度
都是相等的因此称为定长CPU周期
分散节拍法
节拍这样可以避免
周期
延长节拍法
节拍如果在某个机
一或两个节拍
时钟周期插入
期信号一个机器周
微操作数目的多少及相应
以不断插入等待时钟周期
脉冲因为时钟周期
硬布线控制单元设计步骤
硬布线控制单元的设计步骤包括
列出微操作命令的操作时间表
间表中包括各个机器
进行微操作信号综合
微操作时间表可以写
包括下列因素
画出微操作命令的逻辑图
逻辑门电路实现之
化使每条机器指令
微操作控制信号由微指令
产生
具有设计规整调试
由于它增加了一级控制
的速度比微程序控制
延迟而微程序控制器增
了速度由于硬布线控制
微程序控制的基本概念
程序设计的思想方法
形成控制字微指令
的控制存储器中
微命令和微操作
中将控制部件向执
机各部件完成某个基本微
制信号微操作是微命令
的操作过程
生共同完成某一些
微命令兼容和互斥都是
对于单独一个微命令
微指令微地址
微命令的集合存放
的各微操作控制信号
行的微指令地址
微周期
间称为微周期
微程序
描述机器指令微程
好并存放在控制存储器中
级的结构和功能是透明的
制好并存放在主存或辅存
语言或汇编语言程序员所
个是机器设计者看到的微
微指令编码法
从基本原理出发对
直接控制法不译码法
算机无须进行译码
代表一个微命令该位为
微命令对应并控制数据通
路中的一个微操作
若微命令的总数为N
有许多是互斥的不允
息的利用率下降所以这
来使用
最短编码法
得微指令字最短这
若微命令的总数为N操作
后才能得到需要的微
能产生一个微命令不能
得很长而且对于某些要
能与其他方法混合使用
字段编码
服了它们的缺点这
段与段之间采用直接控制
义本字段的微命令而
方法缩短了微指令字因
此得到了广泛的应用
译码器译码器译码器
微指令
微命令微命令微命令
操作控制字段顺序控制字段
图字段直接编码法
指令字长的方法间
而需要与其他字段的编
的原则
内这样不仅有助于提
有的并行性加快执行的
速度
应与数据通路结构相适应
杂性和译码时间
令因此当某字段的长
个这个微命令是互
也是一对互斥的微命令
也是互斥的微命令不允
许它们在同一时刻出现
如在一条微指令中
段采用间接编码法总之
能并降低成本
微程序控制器的组成和工作过程
微程序控制器的基本组成
要画出了微程序控制器
指令寄存器微地址形成
部件和微地址寄存器等
微地址形成部件
微命令
图微程序控制器的基本结构
其性能包括容量
微指令字长相等
的连续执行
中读取微指令做准
微程序控制器的工作过程
机执行机器指令的过
程这个过程可以描述如下
动将取指微程序的入口
操作控制字段产生有关的
的入口地址一般为CM的
入指令寄存器中了
所对应的微程序的入
口地址并送入MAR
的入口地址继续第
行完毕为止
指令操作都是相同的
只负责将指令从主存中取
断周期的微程序这样
对应取指间址和中断周
储器中的微程序数至少有n
例下列叙述中正确的是
微处理器的程序称为微程序
序还称为程序不称
控制器所以答案为B
微程序入口地址的形成
作码字段指出各个微
的情况由机器指令的操
一级功能转换
入口地址码的部分位
二进制数表示分别为
比如MOV指令的操作
作码为则ADD指
入口地址相差个单元如
如果不足条就让有关单元
空闲着
公用段
图指令操作码与微程序入口地址
二级功能转换
令的操作码字段的位
功能转换是指第一次先按
还是双操作数指令等
次即可按操作码区分出具
通过PLA电路实现功能转换
阵列PLA电路将
于变长度变位置的操作
码显得更有效而且转换速度较快
由机器指令的操作码
后继微地址的形成
都要根据要求形成后
它主要有两大基本类型
增量方式顺序转移型微地址
转子之分顺序执行
移或转子时由微指令的顺
微程序计数器PC为
计数功能的寄存器以代
令所对应的一段微程
上的并行微程序转移因
而不利于提高微程序的执行速度
断定方式
规定的测试结果直接
决定后继微地址的全部或部分值
由两部分组成非测
试段和测试段
指定后继微地址在CM
中的某个区域内
地址的低位部分
多可产生个分支依
此类推测试段为n位最多可产生
个分支
行效率和执行速度
构比较复杂
微程序设计方法
序长度提高微程序
它的并行操作能力强
时间短但微指令字较长
者只有熟悉了数据通路
作能力差一般只能
机器指令所需的微指令数
和利用编程比较简单
混合型微指令
指令字又具有一定
微程序控制单元设计步骤
具体步骤是首先写
后编写出每条微指令的二
进制代码
确定微程序控制方式
如是采用水平微程序
行方式执行等
拟定微命令系统
字段的划分编码方
编制微程序
修改对重复和多余
微程序代码化
真代真工作可以用
写入控制存储器
指令流水线
控制及流水线控制方
一条指令后方可取出下
用率低为了加快指令的
计算机中常采用流水线控
制方式
间大致相等的子过程
成的线路上连续流动
指令流水线结构
理这种方式类似于现
出一个产品而生产这个产
的吞吐率将大大提高例如
个子过程分别由个功能
为空间即各子过程
以有条指令在不同的部件
下当流水线充满后每隔
取指译码取数执行
取指
译码
执行
入出
图个子过程的流水处理
资源相关数据相
关控制相关主要由转移指令引起
流水线处理机的主要性能
吞吐率和加速比
的子过程称为瓶颈子
过程
多功能流水时某些
流水线的实际吞吐率TP
一般显著地低于最大吞吐率TPmax
建立时间之后每隔t
流水线的实际吞吐率为
效率
间里各段并不总是
满负荷工作
吞吐率的即
就不存在了只有通
个段总的时空图
图个任务实际占用的时空
消除流水线瓶颈的方法
瓶颈例如有一个
为t只有第段的经过
三个子段
大吞吐率就可提高到
则可以通过重复设
所示每隔t轮流给其
杂设备量要多
出入
功能段的时间忽略
计算机的CPU时钟周期至
少是
功能段的时间不同
说当流水线充满之后
的主要手段之一近
影响到计算机的系统结构
超标量技术和超流水线技术
每个时钟周期里可以
执行的指令的条数小
于等于即它的指令级并行度ILP
工作来提高指令的执
用超标量技术的处理器在
令则有ILPm
过程段再进一步
要增加少量硬件通过各
处理器在一个时钟周期内
令则每隔t就流出一条指
令此时ttn有ILPn
条指令只需
静态流水线和动态流水线
水线只能实现一种固
功能连接变为另一种
后方可使用
子集以完成不同的
功能
地加到软件上以简
以提高流水的效能
第六章总线
机与外部设备之间
其系统的重要组成部分本
一总线概述
总线的基本概念
总线的分类
总线的组成及性能指标
二总线仲裁
集中仲裁方式
分布仲裁方式
三总线操作和定时
同步定时方式
异步定时方式
四总线标准
内部总线标准和外部总线标准
总线概述
传送使得数据通路
采用了总线结构既可以
备的灵活性
总线上可以挂接多个
分时是指同一时刻只允
向总线发送信息势必导
相同的信息
例挂接在总线上的多个部件
个设备只能分时地向总
线接收数据的设备可有多
电路这种状态为
输出呈现开路的高阻状态
还有一个控制端G或
则输出将呈现高阻状态相
的有效电平可以分成种
传送方向同时还允许多个
图种类型的三态门
指总线上的信息只能
的信息可以向两个方向传
总线缓冲器驱动器接收器
按功能层次分类
总线按功能层次分为
片内总线
与ALU之间的公共
连接线
系统总线
总线系统总线也称
制总线地址总线由
数据总线由双方向的多根
或外设送出数据控制总
返回CPU的反馈信号
通信总线外总线
试设备之间信息传送
的总线
按数据线的多少分类
并行总线
位同时传输并行总
完全一致当数据线较长
所以并行总线不宜过长
串行总线
现一个数据的各位按
输特性的要求不高在长
远距离通信但由于数据
总线大多数的通信总线
属于串行总线
的设计目标是以较小
要求
总线结构
的数据传送通路
单总线结构
接在单一的一组总线上
接进行信息交换主存
的干预
图单总线结构
但由于所有部件都
一对设备或部件之间
传送信息
可以细分为地址总线
数据总线和控制总线
双总线结构
只能分时工作即某
受到限制为此出现了图
易于扩充的优点但又在CPU
线与存储器交换信息并
现DMA操作而不必经过
图双总线结构
三总线结构
总线形成的其中
而IO总线是多个外
外设
存储总线
通道
图三总线结构
总线特性
物理特性
的形状尺寸和信号
线的排列方式等要素
功能特性
命令如存储器读写
号等
电气特性
定送入CPU的信号叫
数据总线是双向传递的
单向的有CPU发出的
时间特性
的时间关系例如
效只有规定了总线上各信
总线的性能指标
总线的主要性能指标有
总线宽度
对总线宽度最直接
访问存储器的地址空间范
位数主存空间和IO空间
位数据线和位地址线
更多
使用PCI总线
主存空间为GB
址线有位可寻址
的主存空间
的地址线有位可寻址的主存空间
空间为GB
总线带宽
同步通信中总线的
大小
总线带宽总线宽度总线频率
位数据传送时总
线带宽各是多少
据位时总线
数据位时
总线带宽为MBs
为f数据位为n总
线带宽用Dr表示则Dr
假设fMHz
位根据定义可得
依次类推可以得出其他结果
一个总线周期占用
的传送总线时钟频
一个总线周期中并
行传输字节信息则总线带宽是MBs
总线负载
是有限的
总线复用
号例如地址总线和
提高总线的利用率
总线猝发传输
输存储地址连续的多
个数据
支持总线设备的热插
定CPU等也是评价总线性
能的指标
总线仲裁
动和被动两种形态
保证同一时刻只有一个申
即按照一定的优先次序来
始数据传送总线判优按
见的集中仲裁方式有
链式查询方式
用根控制线与所有部件
号如下
图链式查询方式
未建立前BR才能
件如果某个部件本身没
求就停止传送BG信号
并撤销总线请求信号BR
确定的在查询链中
线控制并很容易扩
路有故障那么第i个以后的
级较高的部件出现频繁的
计数器定时查询方式
公共的BR线发出请求
计数定时地查询各个部件
器部件设备
部件设备
一致时该部件就使BS线
数据传送之后撤销BS信号
图计数器定时查询方式
始各部件的优先次
始即为循环优先级各
置这就可以方便地改变
于n个部件共需nlog
独立请求方式
件均有一对控制线总
总线控制器中有一排队
后给该部件送回批准信号
图独立请求方式
件电路为代价的对
也是相当灵活的它可以
式中需要使用的控制
线数量为
定时查询方式需要
包括n条总线请求线n条总线
批准线和条总线忙线
定时查询计数总
总线上的各个部件或设
应主方的请求每次总线
或多个从方对多个主设
总线操作和定时
致可分为以下阶段
或错误报告
和接收双方的传送定
在一个总线周期中发送
操作所以发送者不
个操作
统一时钟规定因此
同步定时具有较高的传输频率
况同步定时方式中
当各功能模块存取时间相
外设是否已经真正的响应
故可靠性比较低
也没有固定的时间间
从设备接到主设备
程就是一问一答地进行的
的而不是由CPU的节拍
的工作效率也是有好处的
块上因而允许快速
差很大的部件或设备间可
式稍复杂一些成本也会
高一些
不互锁
束和回答信号的
结束不互锁如图a所示
半互锁
销由从设备自己决定
如图b所示
全互锁
的撤销又导致回
活性和可靠性当然也付出
了增加接口电路复杂性的代价
图请求与回答信号的互锁
方式的请求信号和回
回答信号的到来便自己
撤销了请求信号所以速度最快
总线标准
化组织如国际标准
制定并推荐使用的称
造商提出而又被业内其
要经过一段时间的使用
内部总线标准
微机的内部总线都
脚的定义传输速率的设
的约定等都有统一的标
总线共有
线的基础上
结构ISA以支持
位的数据传送和位寻址
线系统但因MCA
为增强的工业标
总线VESA局部总线
能够支持多种硬
局部总线
它的兼容性好不受CPU
品种的限制
没有与微处理器直接
微处理器的局部总线与标
准扩展总线之间的一种总线结构
形及视频支持AGP
系统中的定位不同是
专门为系统中的视频卡设计的
面取代现行的PCI和
高目前最高可达到GBs
规格具有非常强的伸
需求
选项中的英文缩写
均为总线标准
外部总线标准
有时也称为设备总线
串口和并口
信的设备这些设备
计算机接收信息的其他设
并口是因为它有条
有数据位
串口与并口的替代产品USB和IEEE
完成了两种最近推
也被称为iLink或
接口它们可以用来替代
以实现与高速外设的连接
第七章输入输出系统
的部分本章首先介
介绍程序查询程序中断
通道等IO方式
一IO系统基本概念
二外部设备
输入设备键盘鼠标
输出设备显示器打印机
三IO接口IO控制器
接口的功能和基本结构
端口及其编址
四IO方式
程序查询方式
程序中断方式
服务程序的方法
控制器DMA的传送方法DMA的传送过程
系统基本概念
及的内容极其繁杂
输入输出控制管理软
件等部分组成
外设种类非常繁多
设备以字符为单位做数据
单位做数据输入或输出
外部设备
工处理的任务
常见的输入设备有
键盘鼠标等
接向计算机输入各种
应电路即给出一组编
速度快但它以复杂的硬件
的位置即当按某键
然后再把中间代码转换成
过软件编程可为键盘中某些
精确的光标定位可
尽管结构不同但从
和方向变为脉冲信号送给计
到指示位置的目的
备常见的输出设备
有显示器和打印机等
显示器
不能长期保存当显
软拷贝输出设备
显示器分类
图形显示器和图像显
示器PD发光二极管
为主动显示器件和被动
显示器件
显示器具有成本较
也存在着体积大笨重
但亮度较低色彩不够鲜
明且成本较高
显卡通常插在微机
通过显示专用接口连接
左上角开始沿水平
置又从左到右匀速地扫
返回屏幕左上角重复前
屏上没有亮光显示这样
画面就越清晰但要
现显示器中有两种可能
扫描方式
级越高VRAM的
白图像的明暗程度称
灰度级指标彩色图像是
颜色深度与颜色数的对
应关系为
颜色深度log颜色数
如列行字符
代码缓存中存放着显示
的显示属性一般也占
的例如一帧字符的
方式的显示信息以二
形即表示黑色暗
个字节可以存放个点
示器中只需要KB的
例如若用两位二进
个字节只能存放个点
选择无源阵列
取决于晶体在屏幕上
分辨率例如一个具有
方向上有个晶体管总
共有个晶体管
对其充电进而偏转光
提供比无源阵列显示器更
晶体管驱动和控制
图像
种颜色显示存储器
的容量至少为
容量为
显示分辨率为
新屏幕则需要的显存
总带宽至少约为
显示
个若每个
汉字显示在屏幕上共
答案BBB
库容量
二级字库容量B每屏显示汉
字数个每个汉
打印机
上转换为书面信息
拷贝输出设备
针式打印机是使用最
打印机种串式打印
行打印打印速度较快
打印两种字模式打
形点阵式打印机以点阵
符包括汉字和图形
图像等
在文本模式下主
印机则依据代码从位于打印
或汉字与图形模式相比
较高但所能打印的字符
输出点阵图形数据在这
符汉字图形图像等
一个点阵的汉字
数据量个字节
外存储器
储器有硬盘存储器
磁盘阵列光盘存储器等
硬盘存储器
电缆新型的硬盘
硬盘的信息分布
面对应一个磁头所
以记录面号就是磁头号如图a所示
往内则磁道号逐步增加
柱面如图c所
号磁道构成号圆柱面
磁道号在存入文件时
个扇区存放一个定长
扇区每个扇区可存放多少字
或柱面编号从开始
主轴
记录面
扇区
磁头
图磁盘信息分布示意图
磁盘地址
硬盘的主要性能指标
而非格式化容量是
量的左右
关键因素之一在很
来表示RPM值越大
息量通常以道密度
位密度是指沿磁道方向上
动到目的磁道所需要的
访问的记录块旋转到磁头
磁道和等待不同记录块所
寻道时间Ts和平均等待时
配的问题它可以提
高硬盘的读写速度
据传输率是指磁头与
盘缓存之间的数据传输率
接口硬盘则
市场中有着广泛的前景
开销为ms要保证
寻道时间不超过
器开销读写时间
读写时间BMBsms
读写时间
磁盘阵列RAID
个磁盘驱动器来使
动器容量的总和RAID的
优点主要有
成本低功耗小传输速率高
提供容错功能
可以分为个级别即RAIDRAID如表所示在
的几种
好的磁盘需要硬件上的
建的工作由RAID硬件或RAID
软件来完成
表RAID的分级
级别名称数据
磁盘数
可正常工作的
最多失效磁盘数
检测
无冗余无校验的磁盘阵列
镜象磁盘阵列
纠错海明码磁盘阵列
位交叉奇偶校验的磁盘阵列
块交叉奇偶校验的磁盘阵列
光盘存储器
读写信息的圆盘称为
和DVDROM光盘
种类型
据和程序使用时
读出但只能写入
类似于磁盘可重复
都是CDROM光
较高以外其他技术与
完全相同
接口IO控制器
口可以实现主机和外设
之间的信息交换
主机和外设各自具有
接口正是为了解决这些差
异而设置的
接口的功能
接口的功能的主要功能有
实现主机和外设的通信联络控制
联络信息可以决定不
算机系统能统一协调地工
进行地址译码和设备选择
设备选择信息使主
机能和指定外设交换信息
实现数据缓冲
先将数据送入数据
数据格式的变换
互转换的功能例如
和ASCII码的相互转换等
传递控制命令和状态信息
动命令当外设准备
提供外设已经具备与主
时CPU也应有相应的
响应信号反馈给外设
接口的基本结构
些信息都通过数据总
而把控制信息看成输出数
种信息分时地使用数据总
连接如图所示
外设识别
数据命令状态
控制电路
地址信息
控制联络信息
数据并外设
控制联络
数据并串
接口的类型
按数据传送方式分类
口一侧的传送方式
并行接口中外设和接口间
但数据线的数目将随着传
一位一位串行传送的一
按主机访问IO设备的控制方式分类
些的通道控制器等
按功能选择的灵活性分类
程序来改变或选择的
口则不能由程序来改变其
按通用性分类
通用性强专用接
按输入输出的信号分类
列举的并行接口和串
就必须对外设进行
编址
端口
加上相应的控制逻辑
电路组成接口
据信息的寄存器称为
寄存器称为状态端口CPU
息写入有关端口CPU对
可以读又可以写例如
只能写将CPU的各种控
和控制信息可以共用一个
端口编址方式
独立编址方式
空间和IO端口地址空
围是从HFFFFFH
访问主存时由
统一编址方式
址和主存单元地址是统
访问外设时把分配给该
线上然后各外设接口中
存器
不同的地址码B不同的地址线
不同的控制线D不同的数据线
指令就用访存指
址码
单到复杂由集中管
设并行工作的程度可以
分为种
程序查询的基本思想
否能接收新的打印输
作时外设一定是准
了保证数据传送的正确进
就绪CPU就循环等待
是程序查询方式
程序查询方式的工作流程
程序查询方式的工作过程大致为
预置传送参数传送
令向外设接口发出命令
回状态字并进行测试
判断数据传送是否可以进行
绪CPU就踏步等待
号为止
据传送输入时CPU
执行输出指令将
其中包括主存缓冲区
地址加传送个数计数器减
继续传送直到传送
个数计数器为表示传送结束
中虚线框部分框出真
预置传送参数
启动外设
取外设状态
传送一次数据
修改传送参数
外设准备就绪
传送完否
图程序查询方式流程
程序查询方式接口
接口中至少有两个寄存
送的数据信息另一个是
志位组成其中最重要的
是继续循环等待还是进行IO
传送
的功能CPU中通常
中断的基本概念
异常情况和特殊请求
理在处理完毕后CPU
将自动返回原来的程序继续执行
中断的提出
降低
工作
式的思想是CPU在
程序不需要像查询方式
工作输入设备的数据准
请求请求CPU为自己服
去执行中断服务程序为中
传送传送完成后CPU
方式的示意图
启动
工作工作完成完成
响应响应
中断请求
中断返回
中断服务程序
现行程序
图程序中断方式示意图
并行工作使CPU的
外设分别同时独立地工作
处理外设与自己的数据
如运算错掉电溢出
予以处理所以现代计
理的能力
程即从现行程序切换
行中断服务程序前总要保
复现场恢复断点
置中断机构在外设
程序中断与调用子程序的区别
这里现行程序相当
质上的区别
令转入而中断服务
序一般与被中断的现行
程序毫无关系
时请求CPU为自己服务
的情况
中断的基本类型
可以分为多种类型
自愿中断和强迫中断
安排的有关指令这
软中断指令INTn
断产生后由中断系
程序中断和简单中断
一段中断服务程序来
要占用一定的CPU时间
内中断和外中断
溢出中断等
不可屏蔽中断和可屏
电主存读写校验错等
向量中断和非向量中断
的中断中断事件在
即向量地址
单重中断和多重中断
高的中断请求又称
实现级以上的多重中断
外部事件引起的中断
中断请求和中断判优
台计算机允许有多个
了记录中断事件并区分不
个中断源有中断请求时
电路中在中断接口
寄存器的每一位对应一个
示对应的中断源有中断请求
中断请求信号的传送主要有种
独立请求线
谁其中断服务程序
但是其硬件代价较大
公共请求线
但CPU在接到中断
断服务程序的入口地址
二维结构
共的请求线不同请
在中断源较多的系统中
常采用这种方式
中断源的请求究竟
处理的轻重缓急安排优先
级并进行排队
否则就会造成严重后
断源规定较低的优先级
中断判优的方法可分为下列两种
软件判优法
优方法图给出
序逐个检测中断请求寄
中断源具有最高的优先级
具有最低的优先级
信号的发出者也就
对号中断源服务
对n号中断源服务
图软件判优的流程
判优完全是靠程序实
硬件判优电路
度快但是成本较高
的方案有独立请求
的共同特点是优先级别
电路一旦设计连接好之后
将无法改变其优先级别
中断响应过程
些特定的操作转去
执行中断服务程序
响应中断的条件
响应中断必须满足下列条件
还要接收到这个中
断请求信号
只有当
处于不允许中
常中断允许触发器由开
一般情况下CPU在一
中断隐指令
操作是由硬件直接实
真正的指令它没有操作
令其所完成的操作有
的程序必须将原来程
以压入堆栈中
中断现场即CPU主要
证被中断的程序在中断服
务程序的入口地址送程
的方法是不相同的
中断周期
常在硬布线控制器
在微程序控制器的计算机
进入中断服务程序的方法
程序解决这个问题
判优寻找中断源并
但效率是比较低的
能自动形成并找出与
之后CPU进
断响应信号INTA中断源
址CPU接收该向量地址
工作完成
允许中断
发中断请求
中断优先级
判定选优
中断响应
识别中断源
向量地址
形成
现场处理
启动中断
服务程序
中断源CPU
图向量中断过程
向量地址是中断向量
表的指针
处理就可以进入相应
的中断服务程序
表从中断向量表的
量地址是中断服务程序入
断服务程序的方法如图
中断入口地址
中断向量表
中断向量寄存器
高位
低位
图转中断服务程序的方法
中断现场的保护和恢复
另外还有一些通用
后执行两个完全不同的程
换一般来说在中断隐
态寄存器PSWR的内容
运行仅保存这一二个
去保存那些硬件没有保存
内容在中断返回之前
这些内容还应该被恢复
软件方法是在CPU响
单元中去当中断服务程
硬件代价但是占用了CPU
快速的保护和恢复部分重
的硬件支持是堆栈
和程序状态字自动压
取出中断服务程序入口地
必要的通用寄存器的保护
恢复现场则是保护现场的逆处理
中断处理过程
现行程序被中断
的程序继续执行的整个过
断判优中断响应中
断处理中断返回
核心不同计算机系
序的流程如图所示
保护现场
判断中断源
开中断指令
执行中断
关中断指令
恢复现场
准备部分
处理部分
结尾部分
中断返回指令
图中断处理过程
功能是保护现场对于
中断请求打断低级的中断
服务的中断服务程序第
的中断请求打断接着恢
请求中断服务程序的最
后一条指令一定是中断返回指令
件处理恢复现场
的任务是由硬件中
现场中断事件处理
恢复现场开中断中断返回
多重中断与中断屏蔽
急迫优先级越高
因此优先得到CPU的服务
发生的中断请求的断
时在CPU进入某一中断
实现的
断允许触发器EINT
则禁止中断
去在有些情况下
每个中断请求信号
示对应中断源的请求被
断接口电路中多个屏蔽
来设置屏蔽字某一位的
中断屏蔽寄存器的作用如
一位置则对应的中断
才允许对应的中断请
求送往CPU
中断屏蔽
由程序
图中断屏蔽寄存器的作用
个屏蔽字屏蔽字与
表中列出了各中断
源对应的屏蔽字
表各中断源的屏蔽字
中断源的优先级屏蔽字位
本级和更低级的中断
其余各位为它的优
部开放
种中断源的中断请求
电源掉电主存校验错等
中断源变成较高的级
和中断响应次序是两
但是中断处理次序是
可以不同于中断响应次序
蔽码表为程序优
给出的屏蔽码中断
表程序优先级与屏蔽码
程序级别屏蔽码
级级级级
个中断请求同时出现时
高的中断请求打断优先级
中断服务
程序
图CPU的运动轨迹
理次序例如要使
所列即可
表改变处理次序的屏蔽码
所示CPU正在执行
有被屏蔽按照中断优先
处理完后响应第级中
的所以当级的中断服
执行级的中断服务程序
序当第级中断请求到
中断服务程序将被级中
了级中断请求但因
执行完毕再响应第级
图处理次序改变后的CPU运动轨迹
中断系统动态地调
例中断屏蔽码的作用是
利用中断屏蔽码可以
序为ABCD
表中断服务程序所需的时间
中断服务程序所需时间
时间越短优先级越
如果ABCD分别在ssss时刻发出中断请
求请画出CPU
执行中断服务程序的序列
表例的中断屏蔽码
中断源中断屏蔽码
务程序的序列如
图CPU执行中断服务程序的序列
由于没有其他的中
优先级高于D转去
所以不响应B请求
虽然此时中断服务程
序C所需时间为s
第s时中断服务
第s时中断服务程序D
在所以此时开始执行中
的DMA方式的数据
方式的基本概念
完成的这需要占用
数据通道在不需
传送方式在DMA传送方
要进行数据传送时通过
由DMA控制器接管
总线进行数据传送
方式具有下列特点
外设访问
件电路直接实现
式进行后处理
开始和结尾时不占用
的任何资源
请求的响应时间
断点中断断点
图两种请求的响应时刻比较
预故数据传输速率
请求的优先级高于中断请求
成传送数据块的IO操
设备和主存之间B两个IO设备之间
设备和CPU之间DCPU和主存之间
直接数据通道在
数据传送方式
接口DMA控制器
控制总线CPU的
权力并开始执行其操作
一样输出地址信号接
工作它的主要功
能有
控制进入DMA操作周
地址计数值和传送长度
计数值
信号并执行数据传送
向CPU报告DMA操作的结束
主存CPU
中断机构
控制状态逻辑
触发器
主存地址计数器
传送长度计数器
数据缓冲寄存器设备选择
数据线地址线
溢出信号
图简单的DMA控制器
的首地址当DMA
出主存中要交换的一批数据
节数每传送一个字
完毕
数据缓冲寄存器
数据缓冲寄存器再
送到数据缓冲寄存器然
后再送到外设
请求触发器
改传送参数并对DMA
将进行DMA传送的
结尾处理
呈输入状态
的有关寄存器
进行编程
控制数据传送方式的信号线
信号IOW
读出送外设时
和IOW将同时有效
控制器与外设之间的联络信号线
请信号
应答信号
控制器与CPU之间的联络信号线
的信号
进行DMA操作之前
传送的字节数以及传送方
以外设将一个数据块写入
外设HRQ
图DMA控制器的连接
由外设向DMA控制器发出DMA请求信号DREQ
控制器向CPU发出总线请求信号HRQ
了总线的控制
了总线允许
外设与主存交换数据
的选择同时主存地
址计数器的内容加
同时发出MEMW
传送长度计数器减
送工作宣告完成这
方式的传送方法
停止访问主存法
并输出总线批准信
占用若干个存取周期总
器才把总线控制权交回CPU
与总线无关的内部操作
图a是这种传送方法的时间图
控制并
使用主存
主存工作时间
主存工作时间t
不工作DMA不工作
图DMA传送方法
存储器分时法
使CPU和DMA
转移几乎不需要什么时间
行也不进入保持状
来的存取周期内为两
速度提高一倍另外由
可能成为空操作将
周期挪用法
序要求访问主存
制权由DMA控制器控
或一个字然后DMA控
请求的到来重复
的访存冲突那么优先
传送期间CPU无须访
利用率对CPU的影
期与磁盘的数据传输率
被挪用有多少时间
可用于CPU访存
方式的传送过程
传送后的结束处理
预处理
首先执行
初值设置传送方向
启动该外部设备等
送的数据输入或
再由DMA控制器向
发总线请求
数据传送
块为基本单位对于
操作都是通过循环来实现
的其传送过程如图所示
允许传送
主存地址总线
数据IO设备
或主存
主存地址
数据块传送结束
向CPU申请
程序中断
图DMA的数据传送过程
控制器实现的
后处理
请求CPU停止
令平均需要个时
主机进行数据传送以
他开销相当于条指令的
分比是多少
假定每次DMA
周期则CPU用于该
没有访存冲突
则时钟周期
因为CPI所以每条指令平均ns
所以传送时间
他开销折合条指
令花费时间ns
时间
预处理和后处理的总开销时间nss
总开销时间传
送数据的时间
要求整体的速度快单
通道方式被引入计算机
通道的基本概念
手段实现对IO的控制和
度更高当然通道并不
通道还应该向CPU报告自
己的状态以便CPU决定下一步的处理
主存之间直接交换数
控制而通道则是一
道程序来实现对数据传送
则可以同时控制许多
台同类或不同类的设备
通道的类型
字节多路通道
备以字节交叉方式
为其传送一个字节A
地传送ABC所以
图字节多路通道传送方式示意图
子通道服务于一个设
以并行工作但是所有
送完一个字节后就
并行地工作准备需要传
的速度比外设的速度高得
选择通道
通道在物理上它也
只能选择一台设备进行数
执行一个通道程序只有
备的通道程序如图
送完毕后选择通道又选
图选择通道传送方式示意图
式高速传送但是
会使通道处于等待状态
并不高
数组多路通道
通道结构它的基本
在执行辅助操作时通道
备服务
多路通道那样所有
数据既具有多路并行操
通道工作过程
序组织一个通道程序
并启动通道
第二次调用管理程序
对中断请求进行处理
大大减少了对用户程
间关系如图所示
运行用户程序
运行IO管理程序
通道运行存放在主存中
的通道程序
向CPU发中断请求
编制通道程序登记或处理
组织IO操作
启动IO通道
请求输入输出
访管指令
响应IO
通道的流量分析
能达到的最大流量称
为通道极限流量
通道工作时的极限流
量分别为
字节多路通道fmaxbyte
每选择一台设备只传送一个字节
选择通道fmaxselect
数组多路通道fmaxblock
每选择一台设备传送定长k个字节
字节多路通道fbyte
即所接P台设备的速率之和
选择通道fselect
数组多路通道fblock
即所接P台设备中速率最高者
实际最大流量不能超
过通道的极限流量
的极限流量应当是各
传输速率为KBs的
有传输速率为KBs
多路通道带传输速率为
字节多路通道的最
大传输率以传输速率最高
路通道每个选择通
打印机两台读卡机
台终端假定各设备的传输率如下
磁盘机KBs
磁带机KBs
行式打印机KBs
读卡机KBs
终端KBs
答案最大IO数据传输率KBs
通道的最大流量系
道传输率即可因为
选择通道传输率maxKBs
道形式那么该通道
字节多路通道传输率
通道传输
参考文献
大学出版社
数据结构
主讲崔巍
基本概
算法和算法的衡
第一章线性
线性表的定
线性表的实
线性表的顺序存储结
线性表的链式存储结
第二章栈队列和数
栈的定
栈的存储实现和运算实
栈的应用举
队列的定义及基本运
队列的存储实现及运算实
特殊矩阵的压缩存
特殊矩
第三章树与二叉
树的概
二叉
定义与性
二叉树的存
二叉树的遍
线索二叉
树和森
树的存储结
森林和二叉树的转
树和森林的遍
哈夫曼Huffman树和哈夫曼编
第四章
图的概
图的存储及基本操
邻接矩
邻接
图的遍
深度优先搜
广度优先搜
图的基本应
最小生成
最短路
拓扑排
关键路
第五章查
查找的基本概
顺序查找
折半查找
动态查找树
二叉排序
平衡二叉
树及其基本操作B树的基本概
散列
散列表与散列方
常用的散列函
处理冲突的方
散列表的查
散列表的查找分
第六章排
排序的基本概
插入排
直接插入排
折半插入排
冒泡排
简单选择排
希尔排
快速排
堆排
二路归并排
基数排
各种内部排序算法的比
绪论
数据结构是一个二元组DataStructureDR其中D是数
据元素的有限集R是
上关系的有限集
理结构通常由四种基本的
存储方法实现
元素存储位置反映数据元
较差
一组至少一个指针指
于动态操作如插入删
外还需建立一个索引表
下标
散列在连续的有限的地址空
点是存取速度快只能按
算法和算法的衡量
其中每一条指令表示一个或
多个操作
中的指令必须是机器
而程序则是算法在计算机
个程序
算法的时间度量一般情况
为问题规模的某个函数
记作
也可表示Tnmfn其中m为常量记号O读作大O
它表示随问题规模n的
入数据集不同而不同
常见的渐进时间复杂度有lognn
储空间大小的量度只需要
算法为原地工作空
间复杂度为O
习题
以下算法的时间复杂度是
解答A
因为它执行的次数不超
过dd语句的执行次数
求出下列算法的时间复杂度
和xx这三种不同情
况分别返回和字符charcompareSimpleType
其时间复杂度为O
其时间复杂度为On
和N为全局常量应满足
其值由实参带回
其时间复杂度为Omn
第一章线性表
线性表的定义
或者说线性表是由
常记为
其中n为表长n时称为空表
将它的数据类型抽象为
根据具体问题而定
线性表的实现
线性表的顺序存储结构
顺序表
放线性表的各元素
间是线性的因此用物
个数据元素的地址为
数就可求出第i个数
特点
线性表的动态分配顺序存储结构
存储空间的初始分配量
存储空间的分配增量
线性表的存储空间基址
当前长度
当前已分配的存储空间
顺序表上基本运算的实现
顺序表的初始化
此将L设为引用参数
据元素
存储分配失败
初始存储容量
插入运算
插入一个值为x的新元素
插入后使原表长为n的表
成为表长为n表
移动方向从后往前依次
后移一个元素
将x置入空出的第i个位置
修改表长
插入位
置不合法
当前存储空
间已满不能插入
可增加分配
指示插入位置
插入位置及之后的元素右移
插入e
表长增
位置上插入x从ai到
删除运算
个元素从线性表中去掉
删除后使原表长为n的线性表
成为表长为n的线性表
后依次前移一个元素
删除位置不
合法
为被删除元素的位置
被删除元素的值赋给e
表尾元素的位置
被删除元素之后的元素左移
表长减
元素上删除第i个元
个元素
率高O
线性表的链式存储结构
单链表
链表表示
建立起数据元素之间
之外还需要和ai一起
结点结点的结构如图所
针域因此n个元素的
为每个结点中只有一个指向
后继的指针所以称其为单链表
数据域
指针域
为单链表的头指针
指某链表的第一个结点
单链表上基本运算的实现
建立单链表
单链表结点结构
结点占用的存储空间
表从空表开始每读入一
空表
设数据元素的类型为int
元素的顺序是相反的
链表的尾部所以需加入
到链表的尾部
依次读入数据元素
然后r指向新结点注意
第一个结点有所不同
第一个结点的处理
其它结点的处理
指向新的尾结点
对于非空表最后结点的指针域
放空指针
原因是第一个结点加入
需要放在链表的头指针
指针域第一个结点的
第一个位置和其它位置是
也是不同的等等
类型与数据结点一致
头指针变量L也不为空了
和非空表的处理成为一致
中存放的是第一个数
据结点的地址空表时为空
形式
以在链表的第一个位
指针空表中头结点
查找操作
按序号查找GetLinkListLi
则返回该结点的指针
结点将s插入到p的
后面插入示意图如图所示
操作如下
删除结点
的删除首先要找到
操作如下qL
找p的直接前驱
通过上面的基本操作我们得知
在p之后插入s
个顺序进行
循环链表
头指针置入该指针域
指针是否为NULL变
可以从表中任意结点
表头进行此时可以改变
标识可以使得操作效率
得以提高
双向链表
知某结点的指针为p
指针开始顺着各结点的
能是On如果也希望找
一个指向前驱的指针域
待插入的值为x的新结点
图双向链表中的结点插入
操作的前面完成
否则p的前驱结点的指针就丢掉了
操作示意图如图所示
顺序表和链表的比较
顺序表单链表
随机访问取元素O顺序访问取元素On
于查找
位置
素决定通常较稳定
表宜选择链式存储
循环链表的主要优点是
不再需要头指针了
存储方式节省时间
单链表B双链表
单循环链表D顺序表
图双向链表中删除结点
和删除第一个元素则采
用存储方式最节省运算时间
单链表B仅有头指针的单循环链表
双链表D仅有尾指针的单循环链表
复杂度都是On
遍历链表和求链表的第i个结点
删除开始结点
删除地址为p的结点的后继结点
在第i个结点后插入一个新结点in
删除第i个结点in
将n个结点从大到小排序
依次为
已知AaaamBbbbn均为顺序表
试编写一个比较AB大小的算法
查找第一个值mink的结点
查找第一个值maxk的结点
修改指针
释放结点空间
逆置线性链表
逆置带头结点的单链表L
指向p的后继
插入在头结点之后
表结点
和Lb表不再存在
或Lb表中的结点
初始化
插入
释放La和Lb的头结点
中共有的数据元素
表中删除所有的既在Lb
结点
编写算法实现LOCATELx
为双向链表的头指针
搜索元素值为x
的结点p
搜索访问频
度不小于它的结点q
将结点p从当前位置上删除
之后将结点p插入在结点q之后
据域存放一个字符该字
以带头结点的单循环链表
和最少的空间
分解原链表
指向待处理结点的后继
处理字母字符
处理数字字符
处理其它符号
第二章栈队列和数组
栈的定义
这一端称为栈顶另
栈的存储实现和运算实现
操作不同而已
分配顺序存储结构如
在栈构造之前和销毁之后base的值为NULL
栈顶指针
元素非空栈中的top
始终在栈顶元素的下一个位置
入栈若栈不满则将e插入栈顶
栈满追加存储空间
回OK否则返回
产生错误通常栈空
常作为一种控制转移的条件
栈的应用举例
助的数据结构来进行求
解下面通过几个例子进行说明
数制转换
解决方法很多其
中一个简单算法基于下列原理
其中div为整除运
算mod为求余运算
例如其运算过程如下
十进制整数打印输
生八进制数的各个数位
因此若将计算过程中
输入对应的八进制数
算法思想当N时重复
若N则将Nr压入栈s中执行若N将栈s
的内容依次出栈
算法结束
用Nr代替N
构造空栈
表达式求值
是需要栈的加入下
目运算符的算术表达式
中缀表达式求值
算术运算符包括
乘方和括号
设运算规则为
运算符的优先级为
外进行
乘方连续出现时先算最右面的
它的
算因为后面可能还有更
当自左至右扫描表达
时若这个运算符比栈顶
从对象栈出栈两个运算量
继续处理当前字符直到
程中两个栈的状态情况见图
读字符对象栈s算符栈s说明
入栈s
做结果入栈s
结束符做结果入栈s
图中缀表达式的求值过程
达式后缀表达式的
计算按运算符出现的顺序
的后
缀表达式为
后缀表达式求值
是因为表达式中即无
右扫描表达式时每遇到
操作数进行当前的计算
结果
是合乎语法的并且
结束字符为了简化问题
间的转换的问题
本函数返回由后缀表达式A表示
的表达式运算结果
运算符Pushsch
取出两个运算量
中缀表达式转换成后缀表达式
全类似但只需要运
达式本身合法且在字符数
运算对象顺序向存储后
对运算符的处理过程但
算法在此不再赘述
栈与递归
息交换必须通过栈进
函数之前需先完成三件
将控制转移到被调用函数的入口
保存被调函数的计算结果
释放被调函数的数据区
栈式管理
用单位是同一个函数
记录ActivaTionRecord
并将这个活动记录保存在
建立一个新的活动记录一
息返回到本次的调用处
队列的定义及基本运算
进先出的数据结构
称为队或队列把允许插
队列的存储实现及运算实现
顺序队列
循环队列的类型定义如下
最大队列长度
动态分配存储空间
入队
出队
求循环队列元素个数
链队列
根据队的先进先出原
链队列的形式描述如下
结点类型
链队列类型
队头指针
队尾指针
定义一个指向链队列的指针LinkQueueQ
下面是链队列的基本运算的实现
队空出队失败
队头元素放e中
只有一个元素时此时还要
修改队尾指针
但是只能在一端输入数
但是只能在一端输出数
特殊矩阵的压缩存储
数组
中的元素本身可以是
格式和数量的数据有序集
插入删除数据元素的操
界都不能改变
为向量即用向量作
的行列固定后通过一个
元素映象存储在一维
的顺序存放即一行分配
放即一列一列地分配
到大循环一遍后右边
的规律恰好相反最左边
标再变从左向右
最后是右下标
组元素占据d个地址单
第i行中它的前面还有
个数组元素
计算函数为
特殊矩阵
在这种存储表示之下
的密度为但是在矩阵
比如常见的一些特殊矩
空间的角度考虑这种存
元去存储重复的非零元素
我们可以对这类矩阵进行
素不分配空间
对称矩阵
对称矩阵关于主对角
储下三角中的元素aij其
相等因此当访问的元素在
要nn个存储单元现在
有nn个元素
图示意这样原矩阵下三
与ij之间的关系
后根据存储原则它前
面有i行共有iii个元素而aij又是它所
在的行中的第j个所以在上
标k与ij的关系为
角中的元素aij时则去访
就是上三角中的元素在SA
第行第行第n行
第行
对称矩阵的压缩存储
中的对应关系
则将上面两个式
子综合起来得到
三角矩阵
下三角矩阵
存储对角线上方的常
个元素设存入向量
与aji的对应关系为
上三角矩阵
三角部分最后存储
素第p行存储np
个元素aij的前面有i行共存储nnni
是上三角存储顺序中的第
个因此它在SA中的下标为ki
综上sak与aji的对应关系为
下三角矩阵的压缩存储
常数项
对角矩阵
都集中在以主对角线为
元素外所有其他元素都
为零或同一个常数c
按以行为主序
象函数
循环队列中的队尾元素的实
际位置其移动按rearrearModm进行变量length表示当
前循环队列中的元素个数
仅修改头指针
仅修改尾指针
头尾指针都要修改
图对角矩阵及压缩存储
压缩为向量
三对角矩阵
第n行
上三角矩阵的压缩存储
头尾指针可能都要修改
通过一个栈并不能保证
一个栈后的次序由每个数
再全部出栈才能使数据
可以使数据通过
栈后仍然保持次序不变
栈顺序上述这类题目有
且是升序指的是元素的
序号的两个元素
滤去字符
判别读入的字符序列是否为回文
则返回TRUE否则返回FALSE
指出下列程序段的功能是什么
组B中A中元素
即该元素下标ij在B数组中的位置K为
下面的对应关系可
第三章树与二叉树
树的概念
树的定义
棵树为空树在一棵非
树T中
相交的集合TT
称为这个根结点的子
相关术语
点一棵树的结点除
叶结点外其余的都是分支结点
结点的孩子这个结点
关系结点ni是ni的
条路径的长度是k
么M就称为N的祖
先而N称为M的子孙
的双亲结点的层数加
次序的即若交换了
反之则称为无序树
树和森林是不同的概
去根结点就变成了森林
二叉树
定义与性质
或者由一个称为根root
当集合为空时称该二
二叉树即使树中结
满二叉树与完全二叉树
满二叉树
所有叶子结点都在同
完全二叉树
左到右的顺序进行
点在二叉树中的位置相同则
出现在最下层和次下层
一棵完全二叉树而完全
二叉树未必是满二叉树
二叉树的性质
个结点i证明略
个结点
点数为Mxi最多为
则有
结点数为n则有
为二叉树中的分
支数那么有
一个分支一个
度为的结点发出两个分支所以有
综合式式式式可以得到
深度为k结点个数
为n时有
对不等式取对数有
由于k是整数所以有k
到右的顺序对二叉
如果i则序号为i的
结点是根结点无双亲结点
果in则序号为i的
结点无左孩子
如果in则
序号为i的结点无右孩子
亲结点的编号为
左孩子的编号为i右孩子的编号为i
二叉树的存储
顺序存储结构
的结点一般是按照
上的前驱后继关系并不一
点在逻辑上的前驱结点和
后继结点这种存储才有意义
树中结点的序号可
存储空间又可以利用数
结点顺序存储在一维
的逻辑关系只有增添一
一维数组顺序存储显然
全二叉树的存储时会造
一棵深度为k的右单支
树只有k个结点却需分配
二叉树的顺序存储表示可描述为
二叉树的最大结点数
号单元存放根
将b定义为含有MAXTREESIZE个TElemType类型元
素的一维数组
链式存储结构
链来指示着元素的逻
辑关系通常有下面两种形式
二叉链表
分别用来给出该结点
向左孩子和右孩子的指
左右孩子指针
三叉链表
同parent域为指向该结
找双亲结点但是相对
构灵活操作方便
二叉树的链式存储结构不
二叉树的遍历
结点被访问一次且仅
应用问题中常常需要按
的结点然后对这些满足
息由非线性排列变为某种
进行线性化操作
先序遍历
访问根结点
先序遍历根结点的左子树
先序遍历根结点的右子树
访问结点的数据域
先序递归遍历b的左子树
先序递归遍历b的右子树
中序遍历
中序遍历根结点的左子树
中序遍历根结点的右子树
中序递归遍历b的左子树
中序递归遍历b的右子树
后序遍历
后序遍历根结点的左子树
后序遍历根结点的右子树
后序递归遍历b的左子树
后序递归遍历b的右子树
层次遍历
从上至下逐层遍历
完后再按照它们的
行先遇到的结点先访问
一个队列结构遍历从二
个元素每取一个元素
执行下面两个操作
访问该元素所指结点
结点的左孩子指针和右
孩子指针顺序入队
元素在数组中的位置
访问队首结点数据域
将队首结点的左孩子结点入
将队首结点的右孩子结点入
二叉树遍历的非递归实现
当给出二叉树的链式
述算法然而并非所有
效率不高因此就存在
法可以通过对三种遍历方
法的实质过程的分析得到
端无法再深入下去
此的深入和返回直到最
一次经过遇到结点就访
后序遍历是在从右子树返
回时第三次经过遇到结点访问
先返回正好符合栈
其过程如下在沿左子树
前访问之当沿左分支深
遍历则此时访问该结点
入栈然后从该结点的右
入不下去再返回直到第
二次从栈里弹出该结点才访问之
前序遍历的非递归实现
栈变量top用来
表示当前栈顶的位置
非递归先序遍历二叉树
将当前指针p压栈
栈溢出
指针指向p的左孩子结点
栈空时结束
从栈中弹出栈顶元素
指针指向p的右孩子结点
中序遍历的非递归实现
和pprchild之间即
线索二叉树
线索二叉树的定义
为一个线性序列二
么二叉树的存储结构中
为了保留结点在某种遍
的二叉树中的叶子结点和
直接后继结点的指针被称
树的遍历提供许多便利
线索二叉树的结构
域中只有n个指
因此可以利用
接前驱结点的存储地址利
接后继结点的存储地址对
这样就得到了一棵线索
树中序线索二叉树
索化
线索二叉树的结点结构
线索二叉树的存储表示的描述
存储线索二叉树时往
其数据域不存放信息其
某序遍历下的第一个结点
线索二叉树的基本操作实现
建立一棵中序线索二叉树
前结点的左右指针域
为实现这一过程设指
指向它的前驱以便增
设线索
头结点与二叉树的根
结点之间的线索
为全局变量
指向结点的左孩子
指向结点的前驱结点
指向结点的右孩子
指向结点的后继结点
建立头结点
右指针回指
若二叉树为空则左指针回指
中序遍历进行中序线索化
最后一个结点线索化
左子树线索化
前驱线索
后继线索
右子树线索化
下两种情况
的前驱结点
的定义它的前驱结
树的右指针链向下查找
的后继结点
树的左指针链向下查找
结点的算法在前序
点的前驱结点可以采用同
树和森林
树的存储结构
可以采用链式存储结
本身的数据信息还要能
存储方式
双亲表示法
根据这一特性可用
一个元素表示树中的一个
的双亲结点在数组中的序
树中结点的最大个数
孩子链表表示法
一个元素有两个域组
由该结点孩子组成的单链
一维数组中的序号另一
孩子兄弟表示法
加两个分别指向该结
树中结点的存储表示可
描述为
森林和二叉树的转换
树结构表示树和森林
作来实现详见PPT
树和森林的遍历
树的遍历
先根遍历
先根遍历的定义为
后根遍历
后根遍历的定义为
树的先根遍历与其转
换的相应二叉树的中序遍
历算法来实现的
森林的遍历
前序遍历
前序遍历的定义为
访问森林中第一棵树的根结点
中序遍历的定义为
知森林的前序遍历
哈夫曼Huffman树和哈夫曼编码
哈夫曼树的基本概念
果二叉树中的叶结
个带权值的叶结点那么
二叉树的带权路径长度
记为
权值的叶结点构造的
成的二叉树有不同的形态
即哈夫曼树呢根据
的叶结点越靠近根结点
特点提出了一种方法这种
方法的基本思想是
的二叉树从而得到
一个二叉树的集合FTTTn
子树构造一棵新的二叉树
二叉树加入到集合F中
树便是所要建立的哈夫曼
哈夫曼编码
成的二进制串称之
为编码
其出现次数的乘积之
能使电文代码总长最短的
不等长编码
在哈夫曼树中每
径上所以一个字符的哈
码的非二义性
沿结点的双亲链域
得到一位哈夫曼码值由
各分支所组成的序
码为所求编码的高位码
引入二叉线索树的目的是
为了能方便的找到双亲
使二叉树的遍历结果唯一
树的后序序列为
历序列中x在y之前而在其
是y的左兄弟Bx是y的右兄弟
是y的祖先Dx是y的后裔
件是
在m的右方Bn是m的祖先
在m的左方Dn是m的子孙
出现频度分别为
出哈夫曼编码计算平均长度
是多少
答构造的哈夫曼树如下
平均长度
孩子与兄弟域
若结点无孩子则该结点必是叶子
第四章图
图的概念
图的定义
数据关系R
且Pvwvw表示从v到w的弧
谓词Pvw定义了弧vw的意义或信息
图的重要术语
是无序的即顶
是有序的即顶
接边相连接则称该图
条边
向互为相反的两条弧相
中有nn条边
数很少enlogn的
图为稀疏图
顶点的度入度出度
以顶点为终点的弧的
顶点的个数以及边的
数目满足关系
实际应用中权值可以有
有方向的带权图则就是一
个有向网图
顶点序列vpvivi
其中vpvivivivimvq分别为图中的
路径上边的数目称为路径长度
单路径除第一个顶点
或者简单环
子图对于图GVEGVE若存在V
是V的子集E是E的子
集则称图G是G的一个子图
个顶点vj
有路径
该图是连通图无向图的
极大连通子图称为连通分量
顶点vi和vj
均有
该有向图是强连通图有
的一个极小连通子
于原图中的边必定会产
径若生成树中减少任意
一条边则必然成为非连通的
小连通子图即一棵
图的存储及基本操作
邻接矩阵
矩阵表示图中各顶点
之间的邻接关系
假设图GVE有n个确定的顶点即Vvvvn则
表示G中各顶点相邻关
系为一个nn的矩阵矩阵的元素为
若G是网图则邻接矩阵可定义为
其中wij表示边viv
的数
邻接矩阵时只需存放上
或下三角矩阵的元素即可
非元素的个数正好
是第i个顶点的度TDvi
是第i个顶点的出度ODvi或入度IDvi
是否有边相连但是
是EG中的边
不是EG中的边
或若viv
所花费的时间代价很大
这是用邻接矩阵存储图的局限性
相邻关系的邻接矩阵
边数故可将其形式描述
如下
最大顶点数设为
顶点类型设为字符型
边的权值设为整型
顶点表
阵即边表
顶点数和边数
是邻接矩阵存储的图类型
邻接表
储方法邻接表表示法
有邻接于vi的顶点vj链成
邻接表表头放到数组中就
顶点表边表
邻接矩阵表示的结点结构
边的指针域firstarc
指向下一条邻接边的指针域
权值等的域info
邻接表表示的形式描述如下
最大顶点数为
边表结点
邻接点域
指向下一个邻接点的指针域
顶点表结点
顶点域
边表头指针
是邻接表类型
是以邻接表方式存储的图类型
和e个表结点显
阵节省存储空间当和边相关
的信息较多时更是如此
为求入度必须遍历
点vi的入度
个有向图的逆邻接表
则建立邻接表的复杂
时间复杂度为One
点但要判定任意两个
链表因此不及邻接矩阵
方便
图的遍历
且只访问一次图的
图的许多其它操作都是
优先搜索两种方式
深度优先搜索
是树的先根遍历的推广
中某个顶点发v出发
图直至图中所有和v有
选图中一个未曾被访问的
已被访问需附设访
访问则其相应的分量置为
深度优先遍历图G
访问标志数组初始化
对尚未访问的顶点调用DFS
从第v个顶点出发递归
地深度优先遍历图G
访问第v个顶点
对v的尚未访问的邻接顶点w递归
调用DFS
因为一旦某个顶点
程实质上是对每个顶点查
用二维数组表示邻接矩阵
其中n为图中顶点数而当以
向图中边的数或有向图中
广度优先搜索
遍历的过程
问过和邻接点然
的顶点的邻接点先于后被
接点都被访问到若此时图
重复上述过程直至图
程中以v为起始点由近
问标志数组并且
访问的路径长度为
的顶点
按广度优先非递归遍历
图G使用辅助队列Q
对尚未访问的顶点调用BFS
置空的辅助队列Q
访问v
入队列
队头元素出队并置为u
尚未访问的邻接顶点w入队列Q
过边或弧找邻接点的
相同两者不同之处仅仅
在于对顶点访问的顺序不同
图的基本应用
最小生成树
最小生成树的基本概念
一次遍历所经过的边
图的不同遍历就可能得
其生成树的形态如何所
有生成树中都有且仅有n条边
权值总和最小的生成
构造最小生成树的Prim算法
网图中所有带权边
树中的顶点集合T
最小生成树时从顶点
出发集合T的初值为T
值的边uv将
直到UV时最小生
权值
算法的时间复杂度为On
成树
构造最小生成树的Kruskal算法
的方法其基本思想
为TV即开
这样T中各顶点各自
的边集E中的各条边若
为最小生成树的边加入到
个顶点属于同一个连通分
数为时此连通分量便
为G的一棵最小生成树
为网中边的数目因
最短路径
求从v到G中其
余各顶点的最短路径
径中必然存在一条
长度最短者
源点
例图
路径长度最短的最短路径的特点
者是从源点经过顶点
再到达该顶点由两条弧组成
再到达该顶点
其余最短路径的特点
求得最短路径的顶点
迪杰斯特拉Dijkstra算法
存放已找到最短路
集合S中只包含源点v
中集合S每加入一
值集合T中各顶点新
度值加上u到该顶点的路
入到S中为止
径的终点为x那么
而到达顶点x的路径因
么必然存在另外的终点
增的顺序产生最短路径的
前提相矛盾所以此假设不成立
下面介绍Dijkstra算法的实现
从始点v到每个终点
弧上的权值否则置Di
为显然长度为
是vk则可想而知
是从v到vk的弧上的权值或者
是Dj和从vj到vk的弧上的权值之和
路径的长度必是
其中Di或者弧vvi上的权值或者是DkvkS和弧
上的权值之和
表示弧viv
上的权值
代替S为已找到从
出发到图上其余各顶点
选择vj使得
则修改Dk为
短路径是依路径长度
递增的序列
每一对顶点之间的最短路径
杰斯特拉算法n次
间复杂度也是On
但形
式上简单些
存在一条长度为arcsij
路径vi
是否存在
即判别弧vi
和vvj是否存在如果存在则比较vi
的路径长
径假如在路径上再增加
一个顶点v也就是说如果vi
不大于的最短路径那么vi
最短路径相比较从中
继续进行试探依次类
推在一般情况下若vi
和vkvj分别是从vi到vk和从vk到vj的中间
顶点的
序号不大于k的最短路径则将vi
顶点的序号不大于k的最
短路径按此方法可以
同时求得各对顶点间的最短路径
现定义一个n阶方阵序列
其中
从上述计算公式可见D
就是从vi到
的最短路径的长度
拓扑排序
的工程或阶段就称为
系则这样活动在顶点上
有向路径称顶点i
弧则称顶点i是顶点j的
直接前驱顶点j是顶点i的直接后驱
保证该项工程得以
应以自身作为能否开展的
先决条件这是荒谬的
是在AOV网的偏序
然优先于顶点j
也建立一个先后关系
称为拓扑排序也可
序的操作
存在回路这时
任何一项工程中各个活动
拓扑排序算法
出它
中不存在有向回路
说明网中存在有向回路
关键路径
的权值表示活动的开
网具有以下两个性质
代表的活动才能开始
顶点所代表的事件才能
发生
费的时间应该为源点
所需时间之和具有最大
关键路径长度是整个工程
的进度
计算完成整个工程的最短路径
关键路径的确定
算方法
事件的最早发生时间vek
定了所有从顶点发出的
有进入vk的所有活动
早结束时间为vejdutvj
向边vjvk上的权值
事件的最迟发生时间vlk
间设有向边vkvj
须保证不推迟从事件vk出
方法如下
活动ai的最早开始时间ei
了活动ai才能开
间因此有
活动ai的最晚开始时间li
必须开始的最晚时间
迟发生时间不拖后因此
应该有
活动是否为关键活动
动则不是关键活动liei的
是关键路径
输入e条弧jk建立AOE网的存储结构
早发生时间veiin
中存在环不能求关键路
径算法终止否则执行步骤
顶点的最迟发生时间
迟开始时间s
若某条弧满足条件esls则为关键活动
无向图G有n个结点其邻
压缩存储只须存储下
则该森林中必有
棵树
则图G至少有
个顶点
现已知无向图非连
通则n
可以利用
求关键路径的方法
求最短路径的DIJKSTRA方法
深度优先遍历算法
广度优先遍历算法
出栈的顺序退出
算法即为逆向的拓扑序列
第五章查找
查找的基本概念
数据元素记录
作为整体进行考虑和处
理的基本单位
关键码
一个数据元素记录
能唯一确定一个数据元素
记录的关键码称为次关键码
查找表
查找
相同的数据元素并
查找是成功的否则称查找
不存在的数据元素
平均查找长度
数的期望值称为查
个数据元素时已经
的比较操作所以可用平
数据元素类型说明
存储单元可以用数
其它字段
顺序查找法
个线性表可以是顺
元素的关键字值进行比较
存储位置反之若直到
查找失败标志
配号单元留空
表的长度
设置哨兵
从后往前
找不到时i为
个元素关键码相等
查找成功时顺序查找的
平均查找长度为
查找算法的时间复杂
度其为On
对表中数据元素的存
只能进行顺序查找
折半查找法
序升序或降序排
的基本思想是首先以整
间元素的关键码相等则
区继续查找若给定值大
上述查找过程直到查找
置区间初值
找到待查元素
继续在前半区间进行查找
继续在后半区间进行查找
顺序表中不存在待查元素
两个子表对定位到
用二叉树来描述称这个
描述查找过程的二叉树为判定树
结点路径上各结点关
的判定树树高为k则
即klognk所以k因此折半查找在查找成
功时
所进行的关键码比较次数至多为
满二叉树n
为例
则树的第i层有
个结点因此折半
查找的平均查找长度为
所以折半查找的时间效率为Ologn
动态查找树表
二叉排序树
二叉排序树定义
列性质的二叉树
若右子树不空则右子
左右子树也都是二叉排序树
二叉排序树查找过程
若查找树为空查找失败
续进行转
递归算法
查找失败
查找成功
在左子树中继续查找
在右子树中继续查找
平均查找长度的值不
同甚至可能差别很大
为将其插入先
插入结点已存在不用插
结点添加上去的构造一
递归结束条件
插入左子树
将s插入右子树
二叉排序树删除操作
树上某个结点之后
被删除的结点是叶子
不存在关键字等于key的数据元素
找到关键字等
于key的数据元素
其中删除操作过程如下描述
右子树空则只需重接它的左子树
只需重接它的右子树
左右子树均不空
转左然后向右到尽头
指向被删结点的前驱
重接q的右子树
重接q的左子树
类似于有序表的折半
表其查找效率同顺序查
排序树的平均查找长度的
值不同甚至可能差别很大例如
使其依然保持均匀
平衡二叉树
平衡二叉树定义
它的左子树和右子树
平衡二叉树的四种调整方式
要对失去平衡的树进
进行平衡化调整归纳起来
有以下四种情况
左单调整
插入前b插入后调整前c调整后
图RR型
点c的左右子树B
的右子树E上导致
还必须是二叉排序树
整为左子树是B右
的根结点如图c
于直线上的同一个
右单调整
们处于直线上的同
图LL型
先左后右双向旋转
入结点x将插入到结
因子的绝对值大
插入后调整前b先左旋转c再右旋转
插入后调整前e先左旋转f再右旋转
型调整过程
左后右双向旋转
点c成为该子树的
新根如图be
样acb三点处于
转如图cf
先右后左双向旋转
平衡树的查找分析
中和给定值进行比较
型插入前
树及其基本操作B树的基本概念
树及其查找
树中每个结点至多有m棵子树
其中Kiin为关键码且KiKiAi为指向子树根
结点的指针in
所指子树中所有结点的关
键码均大于Knmnmn为关键码的个数
是外部结点或查找失
多关键码的有序表
则到按照对应的指针信
的关键码查找失败即
交叉进行的过程
点在结点中找关
磁盘相对定位将结点信
半查找因为在磁盘上
读取结点信息的次数即
二叉平衡树进行类
除根结点外
键码所在结点的路径
上涉及的结点数不超过
树和m阶的B树
的差异在于
有n棵子树的结点中含有n个关键码
键码记录的指针且
层至少有个结点以
此类推第k层至少有
结点中最大或最小
是在查找时若非终
结点因此在B树不
若在结点内查找时给定
于B树
散列表与散列方法
位置和它的关键字之
字集合中各个关键字进行
用这类方法表示的查找表
进行比较的关键字的顺序
即要求关键码与数据元素
的数据元素位置
存储位置并按此存
元中元素关键码进行比
用的转换函数称为散列函数
函数若最大关键为
这样会造成存储空间的
比散列地址集合大得多
地址上这种现象称为冲
以说冲突不可能避免只能
尽可能减少
构造好的散列函数
布以减少空间
浪费
制定解决冲突的方案
常用的散列函数
则需先对其进行数
字化处理
直接定址法
或者Hkeyakeyb
数不会产生冲突
数字分析法
分析关键字集中的
的频度
平方取中法
关键字的平方值以
各位的影响
的现象
折叠法
加和为散列地址可
后一位对齐相加
除留余数法
表长
适的p很重要若散
可以是不包含小于
质因子的合数
随机数法
其中Random为伪随机函数
合的情况包括关键字
处理冲突的方法
开放定址法
也就是说该地址已
够大空的散列地址总能
找到并将数据元素存入
线性探测法
找出一个空单元或查遍
全表
这样本应存入第i
可能出现很多元素在相
用二次探测法改善堆积问
二次探测法
的质数k是整数
为增量序列
较灵活
随机探测再散列
如iipm并
给定一个随机数做起点
拉链法
义词链的单链表并
和删除主要在同义词链中进
散列表的查找
程为
对于给定值K计算散列地址iHK
若riNULL则查找不成功
若rikeyK则查找成功
否则求下一地址Hi直至rHiNULL查找不成功
或rHikeyK查找成功为止
散列表的查找分析
函数转换的地址直接
处理冲突的方法进行查找
键码进行比较的过程所
冲突少查找效率就
素也就是影响查找效率
的因素
的方法散列表的装
填因子
度但一般情况下我
对平均查找长度的影响就
同样的散列函数但在数
填入表中的元素个数
散列表的装填因子定义为
散列表的长度
中的元素个数成正比
越小填入表中的元素较
少产生冲突的可能性就越小
理冲突的方法有不同
的函数
不便于顺序查找
利用逐点插入建立序列
对应的二叉排序树
在平衡二叉树中
任意结点的左右子树高度相同
不存在度为的结点
出现的最小不平衡子树的根
左指针一定为空B右指针一定为空
为块若对索引表采用
则在等概率的情况下
分块查找成功的平均查找长度为
与双散列法
查找成功时查找不成功时
在本题中ns故
时间不依赖于数据个数n
二叉查找树B链表
二叉树D散列表
键码查询时找到一个表项
表项
中为装填因子计算可得
最少需要进行关键字
比较次
已知一组关键字为
用链地址法解决冲
回答下列问题
构造散列函数
画出散列表
解答由得表长m
散列函数HKKmod
第六章排序
排序的基本概念
一个数据元素集合或序列
相应
的一种排列p
若关键码是主关键码
是次关键码排序结果可
能不唯一
大小移动记录
排序若相同关键码
定的而不能保持一致的
排序方法则称为不稳定的
插入排序
直接插入排序
的因此对n个记
行插入操作从而得到n
中查找Ri的插入位置的插入
排序
从后往前找
返回Ri的插入位置为j
可以在查找的同时实
现向后移动
实现整个序列的排序
算法如下
复制为监视哨
记录后移
插入到正确位置
性能分析
每趟操作分为比较关
按关键码的初始排列
折半插入排序
确定通过对有序表中
既然是在有序表中确定插
待插入记录与有序表居中
序子表中进行将子表又
比较一次便确定了插入位
入位置
冒泡排序
求相逆则交换之
行交换的操作将无
无序序列Rni有序序列Rnin
简单选择排序
待排记录序列的状
态为
则第i趟简单选择
加入有序序列
录交换第二趟
记录交换如此第i
第i个记录交换直到整
个序列按关键码有序
对记录序列R
作简单选择排序
选择第i小的记录并交换到位
在Rin中选择key最小的记录
与第i个记录交换
若是从前往后比较来
小的记录则该算法是不稳
希尔排序
有较大的改进直接
总比较次数
无序序列Rin
序列按关键码基本有序
出发给出插入排序的改
个较稀疏的子序列分
经基本有序最后再对全部
距离d在整个待排序记
然后再取两个记录间的
成一组进行组内直接插入
即整个待排序记录序列
录移动次数依赖于步长
记录的移动次数目前还
各种取法有取奇数的
后一个步长因子必须为
快速排序
称为支点将待排序列
关键码另一部分所有记
点记录分成两部分的过程
一趟快速排序算法
用子表的第一个记录作枢轴记录
从表的两端交替地向中间扫描
返回枢轴所在位置
的移动次数应先将
再将枢轴记录到位
将上述一次划分的算法改写如下
枢轴记录关键字
将比枢轴记录小的记录移到低端
将比枢轴记录大的记录移到高端
枢轴记录到位
返回枢轴位置
递归形式的快速排序算法
对记录序列Rlowhigh进行快速排序
长度大于
将Lrlowhigh一
分为二
对低子表递归排序pivotloc是
枢轴位置
对高子表递归排序
对记录序列进行快
速排序
均要用栈来存放递归
下为Ologn即树的高
码比较时效为On
是一个常数
能最好的但若初始序
进之通常以三者取中法
居中的调整为支点记录
堆排序
经得到的关键字比较的
性的完全二叉树其
或大于左右子树根结点的
称作小顶堆或大顶堆
体作法是设有n个
堆顶元素输出得到n个
建成堆输出堆顶元素得
按关键码有序的序列称这
个过程为堆排序
因此实现堆排序需解决两个问题
个结点的完全
为堆直到根结点
为一个新堆
将堆底元素送入堆
右孩子中较小或小大
根结点不满足堆的性质
堆的性质继续对不满足
个自根结点到叶子结点的
调整过程为筛选
堆排序的算法如下所示
对记录序列Rn进
行堆排序
把Rn建成大顶堆
子树筛选使该
交换
将Ri重新调整为大顶堆
中筛选应沿关键字较大
的孩子结点向下进行
本函数调整Rs的关
沿key较大的孩子结点向下筛选
为key较大的
记录的下标
应插入在位置s上
时间效率
键字比较的次数至多为
堆排序是一个不稳定的排序方法
二路归并排序
算法思想
为一个有序序列
的有序子序列
归并为一个有序序列
有序子序列Rlm有序子序列Rmn
有序序列Rln
将有序的SRim和SRmn归并为有序的TRin
将SR中记录由小到
大地并入TR
将剩余的SRim复制到TR
将剩余的SRjn复制到TR
同的程序设计思想得
出的
果记录无序序列Rst
的两部分Rsst和Rstt分别按关键字
两部分进行路归并排序
将SRst平分为SRsm和SRmt
递归地将SRsm归并为有序的TRsm
递归地SRmt归并为有序的TRmt
将TRsm和TRmt归并到TRst
对记录序列Rn作路归
并排序
复杂度为On
两归并生成的子表看
所以归并趟数约等于二
基数排序
分成多关键码进行
排序的方法
符构成的多关键字
法其好处是不需要进行关键
字间的比较
例如对下列这组关键字
后按从至的顺序将它们收
成组之后再按从至的顺
便可得到这组关键字的有序序
表作存储结构即链
式基数排序具体作法为
的链队列中每个队列中记
录的关键字位相同
成一个链表
对每个关键字位均重复和两步
的趟数
各种内部排序算法的比较
时间性能
其中以快速排序为最
时间复杂度为On
入为
排序能达到On的时间
能蜕化为On
因此是应
该尽量避免的情况
中关键字的分布而改变
空间性能
堆排序的空间复杂度为
快速排序为Ologn为栈所需的辅助空间
排序方法的稳定性能
中的相对位置在排
序之前和经过排序之后没有改变
序方法
各种排序方法的综合比较和选择
各种排序方法的比较如表
时间复杂度
空间复杂度稳定性
性最好平均最坏
直接插入OnOn
是简单
冒泡OnOn
选择On
否简单
希尔
否复杂
快速OnlognOnlognOn
堆OnlognOnlognOnlognO否复杂
归并OnlognOnlognOnlognOn是复杂
基数OdnrdOdnrdOdnrdOrd是复杂
选择
身的大小关键字的
序堆排序或归并排
的是
起泡排序
下列序列中满足堆定义的是
插入排序B归并排序
快速排序D堆排序
方法是
基数排序B归并排序
快速排序B归并排序
冒泡排序D堆排序
最终的位置上
快速排序Bshell排序
堆排序D冒泡排序
大的元素用排序
方法最好
堆排序B快速排序
基数排序D希尔排序
若一组纪录的关键码利用快速排
序的方法以第一个纪录为
基准得到的一次划分结果为
关键字进行比较产生最小
和最大的元素
相邻两趟向相反方向起泡的
冒泡排序算法
冒泡的上下界
设不发生交换
从上向下起泡
修改上界
从下向上起泡
修改下界
